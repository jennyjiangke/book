<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 4 Text Analysis | Media Analytics With R</title>
  <meta name="description" content="Chapter 4 Text Analysis | Media Analytics With R" />
  <meta name="generator" content="bookdown 0.26 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 4 Text Analysis | Media Analytics With R" />
  <meta property="og:type" content="book" />
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 4 Text Analysis | Media Analytics With R" />
  
  
  

<meta name="author" content="Jenny Jiang &amp; Brian Walsh" />


<meta name="date" content="2023-01-25" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="statistical-analyses-of-a-single-variable.html"/>
<link rel="next" href="geo-spatial-analysis-and-visualizations.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>
<script src="libs/kePrint-0.0.1/kePrint.js"></script>
<link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet" />


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Media Analytics with R</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Preface</a>
<ul>
<li class="chapter" data-level="0.1" data-path="index.html"><a href="index.html#who-is-this-book-for"><i class="fa fa-check"></i><b>0.1</b> Who is this book for?</a></li>
<li class="chapter" data-level="0.2" data-path="index.html"><a href="index.html#why-r"><i class="fa fa-check"></i><b>0.2</b> Why R?</a></li>
<li class="chapter" data-level="0.3" data-path="index.html"><a href="index.html#what-will-we-learn-to-do-with-r-in-this-book"><i class="fa fa-check"></i><b>0.3</b> What will we learn to do with R in this book?</a></li>
<li class="chapter" data-level="0.4" data-path="index.html"><a href="index.html#installing-the-software"><i class="fa fa-check"></i><b>0.4</b> Installing the Software</a></li>
<li class="chapter" data-level="0.5" data-path="index.html"><a href="index.html#getting-started"><i class="fa fa-check"></i><b>0.5</b> Getting Started</a></li>
<li class="chapter" data-level="0.6" data-path="index.html"><a href="index.html#r-studio-projects"><i class="fa fa-check"></i><b>0.6</b> R Studio Projects</a></li>
</ul></li>
<li class="chapter" data-level="1" data-path="intro-to-programming-in-r.html"><a href="intro-to-programming-in-r.html"><i class="fa fa-check"></i><b>1</b> Intro to Programming in R</a>
<ul>
<li class="chapter" data-level="1.1" data-path="intro-to-programming-in-r.html"><a href="intro-to-programming-in-r.html#creating-a-new-project-in-r-studio"><i class="fa fa-check"></i><b>1.1</b> Creating a New Project in R Studio</a></li>
<li class="chapter" data-level="1.2" data-path="intro-to-programming-in-r.html"><a href="intro-to-programming-in-r.html#loading-packages-and-data"><i class="fa fa-check"></i><b>1.2</b> Loading Packages and Data</a></li>
<li class="chapter" data-level="1.3" data-path="intro-to-programming-in-r.html"><a href="intro-to-programming-in-r.html#section"><i class="fa fa-check"></i><b>1.3</b> %&gt;%</a></li>
<li class="chapter" data-level="1.4" data-path="intro-to-programming-in-r.html"><a href="intro-to-programming-in-r.html#filtering-data"><i class="fa fa-check"></i><b>1.4</b> Filtering Data</a></li>
<li class="chapter" data-level="1.5" data-path="intro-to-programming-in-r.html"><a href="intro-to-programming-in-r.html#visualizing"><i class="fa fa-check"></i><b>1.5</b> Visualizing</a></li>
<li class="chapter" data-level="1.6" data-path="intro-to-programming-in-r.html"><a href="intro-to-programming-in-r.html#syntax"><i class="fa fa-check"></i><b>1.6</b> Syntax</a></li>
<li class="chapter" data-level="1.7" data-path="intro-to-programming-in-r.html"><a href="intro-to-programming-in-r.html#creating-variables"><i class="fa fa-check"></i><b>1.7</b> Creating Variables</a></li>
<li class="chapter" data-level="1.8" data-path="intro-to-programming-in-r.html"><a href="intro-to-programming-in-r.html#modifying-data"><i class="fa fa-check"></i><b>1.8</b> Modifying Data</a></li>
<li class="chapter" data-level="1.9" data-path="intro-to-programming-in-r.html"><a href="intro-to-programming-in-r.html#count"><i class="fa fa-check"></i><b>1.9</b> Count</a></li>
<li class="chapter" data-level="1.10" data-path="intro-to-programming-in-r.html"><a href="intro-to-programming-in-r.html#more-aesthetics"><i class="fa fa-check"></i><b>1.10</b> More Aesthetics</a></li>
<li class="chapter" data-level="1.11" data-path="intro-to-programming-in-r.html"><a href="intro-to-programming-in-r.html#review"><i class="fa fa-check"></i><b>1.11</b> Review</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="manipulating-data.html"><a href="manipulating-data.html"><i class="fa fa-check"></i><b>2</b> Manipulating Data</a>
<ul>
<li class="chapter" data-level="2.1" data-path="manipulating-data.html"><a href="manipulating-data.html#creating-subsetted-data"><i class="fa fa-check"></i><b>2.1</b> Creating Subsetted Data</a></li>
<li class="chapter" data-level="2.2" data-path="manipulating-data.html"><a href="manipulating-data.html#mutate"><i class="fa fa-check"></i><b>2.2</b> Mutate</a></li>
<li class="chapter" data-level="2.3" data-path="manipulating-data.html"><a href="manipulating-data.html#group_by-summarize"><i class="fa fa-check"></i><b>2.3</b> Group_by , Summarize()</a></li>
<li class="chapter" data-level="2.4" data-path="manipulating-data.html"><a href="manipulating-data.html#working-with-strings"><i class="fa fa-check"></i><b>2.4</b> Working with Strings</a>
<ul>
<li class="chapter" data-level="2.4.1" data-path="manipulating-data.html"><a href="manipulating-data.html#practical-applications-of-stringr"><i class="fa fa-check"></i><b>2.4.1</b> Practical Applications of Stringr</a></li>
</ul></li>
<li class="chapter" data-level="2.5" data-path="manipulating-data.html"><a href="manipulating-data.html#average-name-length-over-time"><i class="fa fa-check"></i><b>2.5</b> Average name length over time</a></li>
<li class="chapter" data-level="2.6" data-path="manipulating-data.html"><a href="manipulating-data.html#revisiting-summarize"><i class="fa fa-check"></i><b>2.6</b> Revisiting summarize()</a></li>
<li class="chapter" data-level="2.7" data-path="manipulating-data.html"><a href="manipulating-data.html#additional-functions"><i class="fa fa-check"></i><b>2.7</b> Additional Functions</a></li>
<li class="chapter" data-level="2.8" data-path="manipulating-data.html"><a href="manipulating-data.html#case-study-born-without-a-proper-name"><i class="fa fa-check"></i><b>2.8</b> Case Study: Born Without A (Proper) Name</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="statistical-analyses-of-a-single-variable.html"><a href="statistical-analyses-of-a-single-variable.html"><i class="fa fa-check"></i><b>3</b> Statistical Analyses of a Single Variable</a>
<ul>
<li class="chapter" data-level="3.1" data-path="statistical-analyses-of-a-single-variable.html"><a href="statistical-analyses-of-a-single-variable.html#variables-levels-of-measurement"><i class="fa fa-check"></i><b>3.1</b> Variables &amp; Levels of Measurement</a>
<ul>
<li class="chapter" data-level="3.1.1" data-path="statistical-analyses-of-a-single-variable.html"><a href="statistical-analyses-of-a-single-variable.html#nominal-data"><i class="fa fa-check"></i><b>3.1.1</b> Nominal Data</a></li>
<li class="chapter" data-level="3.1.2" data-path="statistical-analyses-of-a-single-variable.html"><a href="statistical-analyses-of-a-single-variable.html#ordinal-data"><i class="fa fa-check"></i><b>3.1.2</b> Ordinal Data</a></li>
<li class="chapter" data-level="3.1.3" data-path="statistical-analyses-of-a-single-variable.html"><a href="statistical-analyses-of-a-single-variable.html#interval-data"><i class="fa fa-check"></i><b>3.1.3</b> Interval Data</a></li>
<li class="chapter" data-level="3.1.4" data-path="statistical-analyses-of-a-single-variable.html"><a href="statistical-analyses-of-a-single-variable.html#ratio-data"><i class="fa fa-check"></i><b>3.1.4</b> Ratio Data</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="statistical-analyses-of-a-single-variable.html"><a href="statistical-analyses-of-a-single-variable.html#frequency-distribution"><i class="fa fa-check"></i><b>3.2</b> Frequency Distribution</a></li>
<li class="chapter" data-level="3.3" data-path="statistical-analyses-of-a-single-variable.html"><a href="statistical-analyses-of-a-single-variable.html#percentage-change"><i class="fa fa-check"></i><b>3.3</b> Percentage Change</a></li>
<li class="chapter" data-level="3.4" data-path="statistical-analyses-of-a-single-variable.html"><a href="statistical-analyses-of-a-single-variable.html#relative-frequency"><i class="fa fa-check"></i><b>3.4</b> Relative Frequency</a></li>
<li class="chapter" data-level="3.5" data-path="statistical-analyses-of-a-single-variable.html"><a href="statistical-analyses-of-a-single-variable.html#percentage-points"><i class="fa fa-check"></i><b>3.5</b> Percentage Points</a></li>
<li class="chapter" data-level="3.6" data-path="statistical-analyses-of-a-single-variable.html"><a href="statistical-analyses-of-a-single-variable.html#rate"><i class="fa fa-check"></i><b>3.6</b> Rate</a></li>
<li class="chapter" data-level="3.7" data-path="statistical-analyses-of-a-single-variable.html"><a href="statistical-analyses-of-a-single-variable.html#ratio"><i class="fa fa-check"></i><b>3.7</b> Ratio</a></li>
<li class="chapter" data-level="3.8" data-path="statistical-analyses-of-a-single-variable.html"><a href="statistical-analyses-of-a-single-variable.html#central-tendency"><i class="fa fa-check"></i><b>3.8</b> Central Tendency</a></li>
<li class="chapter" data-level="3.9" data-path="statistical-analyses-of-a-single-variable.html"><a href="statistical-analyses-of-a-single-variable.html#data-variation"><i class="fa fa-check"></i><b>3.9</b> Data Variation</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="text-analysis.html"><a href="text-analysis.html"><i class="fa fa-check"></i><b>4</b> Text Analysis</a>
<ul>
<li class="chapter" data-level="4.1" data-path="text-analysis.html"><a href="text-analysis.html#an-introduction-to-stringr"><i class="fa fa-check"></i><b>4.1</b> An Introduction to Stringr</a>
<ul>
<li class="chapter" data-level="4.1.1" data-path="text-analysis.html"><a href="text-analysis.html#practical-applications-of-stringr-1"><i class="fa fa-check"></i><b>4.1.1</b> Practical Applications of Stringr</a></li>
<li class="chapter" data-level="4.1.2" data-path="text-analysis.html"><a href="text-analysis.html#average-name-length-over-time-1"><i class="fa fa-check"></i><b>4.1.2</b> Average name length over time</a></li>
<li class="chapter" data-level="4.1.3" data-path="text-analysis.html"><a href="text-analysis.html#common-issue-example-most-common-3-letter-names"><i class="fa fa-check"></i><b>4.1.3</b> Common issue: (example: most common 3-letter names)</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="geo-spatial-analysis-and-visualizations.html"><a href="geo-spatial-analysis-and-visualizations.html"><i class="fa fa-check"></i><b>5</b> Geo-Spatial Analysis and Visualizations</a></li>
<li class="chapter" data-level="6" data-path="network-analysis.html"><a href="network-analysis.html"><i class="fa fa-check"></i><b>6</b> Network Analysis</a></li>
<li class="chapter" data-level="7" data-path="publishing.html"><a href="publishing.html"><i class="fa fa-check"></i><b>7</b> Publishing</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Media Analytics With R</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="text-analysis" class="section level1 hasAnchor" number="4">
<h1><span class="header-section-number">Chapter 4</span> Text Analysis<a href="text-analysis.html#text-analysis" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<div id="an-introduction-to-stringr" class="section level2 hasAnchor" number="4.1">
<h2><span class="header-section-number">4.1</span> An Introduction to Stringr<a href="text-analysis.html#an-introduction-to-stringr" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div class="sourceCode" id="cb143"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb143-1"><a href="text-analysis.html#cb143-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(babynames)</span>
<span id="cb143-2"><a href="text-analysis.html#cb143-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb143-3"><a href="text-analysis.html#cb143-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidytext)</span>
<span id="cb143-4"><a href="text-analysis.html#cb143-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(textdata)</span></code></pre></div>
<p>Stringr is a package in the <em>tidyverse</em> that deals with, well, strings. What are strings? Anything in your data frame that is text- or character-based. So, in the case of <em>babynames</em>, that’d be <em>Name</em> and <em>Sex -</em> Year, Prop and N are not strings.</p>
<p>Stringr allows for string manipulation across your entire dataset. If, for instance, we had a column of character data that repeatedly mis-spelled a name: <em>Bryan</em> instead of <em>Brian</em>, say - stringr could change every instance of <em>Bryan</em> into <em>Brian</em> in one line of code.</p>
<p>Let’s start playing around with stringr by creating a <em>variable</em> that is equal to a string:</p>
<div class="sourceCode" id="cb144"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb144-1"><a href="text-analysis.html#cb144-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(stringr)</span>
<span id="cb144-2"><a href="text-analysis.html#cb144-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb144-3"><a href="text-analysis.html#cb144-3" aria-hidden="true" tabindex="-1"></a>sentence <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;hello&quot;</span>, <span class="st">&quot;this is a long sentence&quot;</span>, <span class="cn">NA</span>)</span></code></pre></div>
Here are some functions from the stringr package that we can use to manipulate this sentence.
<ul>
<li>
<p>How many characters are there in the string?</p>
<div class="sourceCode" id="cb145"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb145-1"><a href="text-analysis.html#cb145-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_length</span>(sentence)</span></code></pre></div>
<pre><code>## [1]  5 23 NA</code></pre>
<li>
<p>Let’s replace every instance of ‘l’ with ‘x’</p>
<div class="sourceCode" id="cb147"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb147-1"><a href="text-analysis.html#cb147-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_replace</span>(sentence, <span class="st">&quot;l&quot;</span>, <span class="st">&quot;X&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;heXlo&quot;                   &quot;this is a Xong sentence&quot; NA</code></pre>
<p>Okay, now let’s create a new string that is a <em>list</em> of character strings:</p>
<div class="sourceCode" id="cb149"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb149-1"><a href="text-analysis.html#cb149-1" aria-hidden="true" tabindex="-1"></a>list <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;Apple&quot;</span>, <span class="st">&quot;Banana&quot;</span>, <span class="st">&quot;Pear&quot;</span>)</span></code></pre></div>
<p>Let’s use str_sub to ‘pull out’ the first character of the string:</p>
<div class="sourceCode" id="cb150"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb150-1"><a href="text-analysis.html#cb150-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_sub</span>(list, <span class="dv">1</span>,<span class="dv">1</span>)</span></code></pre></div>
<pre><code>## [1] &quot;A&quot; &quot;B&quot; &quot;P&quot;</code></pre>
<p>What just happened? We told R to only grab the first character. Can we grab the first three characters?</p>
<div class="sourceCode" id="cb152"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb152-1"><a href="text-analysis.html#cb152-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_sub</span>(list, <span class="dv">1</span>,<span class="dv">3</span>)</span></code></pre></div>
<pre><code>## [1] &quot;App&quot; &quot;Ban&quot; &quot;Pea&quot;</code></pre>
<p>Let’s adjust the string’s content so each fruit is written entirely in lower case:</p>
<div class="sourceCode" id="cb154"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb154-1"><a href="text-analysis.html#cb154-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_to_lower</span>(<span class="fu">str_sub</span>(list))</span></code></pre></div>
<pre><code>## [1] &quot;apple&quot;  &quot;banana&quot; &quot;pear&quot;</code></pre>
<p>We can also use stringr to detect specific words or phrases:</p>
<div class="sourceCode" id="cb156"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb156-1"><a href="text-analysis.html#cb156-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_detect</span>(list, <span class="st">&quot;Pear&quot;</span>)</span></code></pre></div>
<pre><code>## [1] FALSE FALSE  TRUE</code></pre>
<p>R returns the position of “Pear” in the list.</p>
<div id="practical-applications-of-stringr-1" class="section level3 hasAnchor" number="4.1.1">
<h3><span class="header-section-number">4.1.1</span> Practical Applications of Stringr<a href="text-analysis.html#practical-applications-of-stringr-1" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Let’s apply more Stringr concepts to a body of text. Where could we find text? How would we get text into R?</p>
<p>One way would be a ‘web scrape’ - programmatically grabbing all the relevant text off of a page, or a series of pages - think Amazon product reviews.</p>
<p>Another would be to import a body of text, like a .txt file, into R, and then break it up into individual words - more on this in the next chapter.</p>
<p>A third way would be to use data included in an R package. More commonly, packages give you <em>access</em> to online datasets too large to download (Spotify, The New York Times, etc.). This technique, of selectively downloading relevant data from a much larger, online database, is the basis for the concept of an ‘API.’ [<em>Application Programming Interface</em>, if you’re wondering.] Many websites also use APIs, with downloadable files for analysis.</p>
<p>So as to avoid any complication, let’s hold off on accessing an API until we cover Twitter, and continue to use the <em>babynames</em> dataset for now; then we can move on to analyzing lyrics, political speeches, and great works of literature.</p>
<p>A snippet of <em>Base R</em> here, rather than the <em>tidyverse</em>: if we want to specify a <em>column</em> in our dataset, we write the name of the dataset or variable, then the dollar sign, then the name of the column:</p>
<div class="sourceCode" id="cb158"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb158-1"><a href="text-analysis.html#cb158-1" aria-hidden="true" tabindex="-1"></a>babynames<span class="sc">$</span>name</span></code></pre></div>
<pre><code>##    [1] &quot;Mary&quot;       &quot;Anna&quot;       &quot;Emma&quot;       &quot;Elizabeth&quot;  &quot;Minnie&quot;     &quot;Margaret&quot;   &quot;Ida&quot;        &quot;Alice&quot;      &quot;Bertha&quot;     &quot;Sarah&quot;      &quot;Annie&quot;     
##   [12] &quot;Clara&quot;      &quot;Ella&quot;       &quot;Florence&quot;   &quot;Cora&quot;       &quot;Martha&quot;     &quot;Laura&quot;      &quot;Nellie&quot;     &quot;Grace&quot;      &quot;Carrie&quot;     &quot;Maude&quot;      &quot;Mabel&quot;     
##   [23] &quot;Bessie&quot;     &quot;Jennie&quot;     &quot;Gertrude&quot;   &quot;Julia&quot;      &quot;Hattie&quot;     &quot;Edith&quot;      &quot;Mattie&quot;     &quot;Rose&quot;       &quot;Catherine&quot;  &quot;Lillian&quot;    &quot;Ada&quot;       
##   [34] &quot;Lillie&quot;     &quot;Helen&quot;      &quot;Jessie&quot;     &quot;Louise&quot;     &quot;Ethel&quot;      &quot;Lula&quot;       &quot;Myrtle&quot;     &quot;Eva&quot;        &quot;Frances&quot;    &quot;Lena&quot;       &quot;Lucy&quot;      
##   [45] &quot;Edna&quot;       &quot;Maggie&quot;     &quot;Pearl&quot;      &quot;Daisy&quot;      &quot;Fannie&quot;     &quot;Josephine&quot;  &quot;Dora&quot;       &quot;Rosa&quot;       &quot;Katherine&quot;  &quot;Agnes&quot;      &quot;Marie&quot;     
##   [56] &quot;Nora&quot;       &quot;May&quot;        &quot;Mamie&quot;      &quot;Blanche&quot;    &quot;Stella&quot;     &quot;Ellen&quot;      &quot;Nancy&quot;      &quot;Effie&quot;      &quot;Sallie&quot;     &quot;Nettie&quot;     &quot;Della&quot;     
##   [67] &quot;Lizzie&quot;     &quot;Flora&quot;      &quot;Susie&quot;      &quot;Maud&quot;       &quot;Mae&quot;        &quot;Etta&quot;       &quot;Harriet&quot;    &quot;Sadie&quot;      &quot;Caroline&quot;   &quot;Katie&quot;      &quot;Lydia&quot;     
##   [78] &quot;Elsie&quot;      &quot;Kate&quot;       &quot;Susan&quot;      &quot;Mollie&quot;     &quot;Alma&quot;       &quot;Addie&quot;      &quot;Georgia&quot;    &quot;Eliza&quot;      &quot;Lulu&quot;       &quot;Nannie&quot;     &quot;Lottie&quot;    
##   [89] &quot;Amanda&quot;     &quot;Belle&quot;      &quot;Charlotte&quot;  &quot;Rebecca&quot;    &quot;Ruth&quot;       &quot;Viola&quot;      &quot;Olive&quot;      &quot;Amelia&quot;     &quot;Hannah&quot;     &quot;Jane&quot;       &quot;Virginia&quot;  
##  [100] &quot;Emily&quot;      &quot;Matilda&quot;    &quot;Irene&quot;      &quot;Kathryn&quot;    &quot;Esther&quot;     &quot;Willie&quot;     &quot;Henrietta&quot;  &quot;Ollie&quot;      &quot;Amy&quot;        &quot;Rachel&quot;     &quot;Sara&quot;      
##  [111] &quot;Estella&quot;    &quot;Theresa&quot;    &quot;Augusta&quot;    &quot;Ora&quot;        &quot;Pauline&quot;    &quot;Josie&quot;      &quot;Lola&quot;       &quot;Sophia&quot;     &quot;Leona&quot;      &quot;Anne&quot;       &quot;Mildred&quot;   
##  [122] &quot;Ann&quot;        &quot;Beulah&quot;     &quot;Callie&quot;     &quot;Lou&quot;        &quot;Delia&quot;      &quot;Eleanor&quot;    &quot;Barbara&quot;    &quot;Iva&quot;        &quot;Louisa&quot;     &quot;Maria&quot;      &quot;Mayme&quot;     
##  [133] &quot;Evelyn&quot;     &quot;Estelle&quot;    &quot;Nina&quot;       &quot;Betty&quot;      &quot;Marion&quot;     &quot;Bettie&quot;     &quot;Dorothy&quot;    &quot;Luella&quot;     &quot;Inez&quot;       &quot;Lela&quot;       &quot;Rosie&quot;     
##  [144] &quot;Allie&quot;      &quot;Millie&quot;     &quot;Janie&quot;      &quot;Cornelia&quot;   &quot;Victoria&quot;   &quot;Ruby&quot;       &quot;Winifred&quot;   &quot;Alta&quot;       &quot;Celia&quot;      &quot;Christine&quot;  &quot;Beatrice&quot;  
##  [155] &quot;Birdie&quot;     &quot;Harriett&quot;   &quot;Mable&quot;      &quot;Myra&quot;       &quot;Sophie&quot;     &quot;Tillie&quot;     &quot;Isabel&quot;     &quot;Sylvia&quot;     &quot;Carolyn&quot;    &quot;Isabelle&quot;   &quot;Leila&quot;     
##  [166] &quot;Sally&quot;      &quot;Ina&quot;        &quot;Essie&quot;      &quot;Bertie&quot;     &quot;Nell&quot;       &quot;Alberta&quot;    &quot;Katharine&quot;  &quot;Lora&quot;       &quot;Rena&quot;       &quot;Mina&quot;       &quot;Rhoda&quot;     
##  [177] &quot;Mathilda&quot;   &quot;Abbie&quot;      &quot;Eula&quot;       &quot;Dollie&quot;     &quot;Hettie&quot;     &quot;Eunice&quot;     &quot;Fanny&quot;      &quot;Ola&quot;        &quot;Lenora&quot;     &quot;Adelaide&quot;   &quot;Christina&quot; 
##  [188] &quot;Lelia&quot;      &quot;Nelle&quot;      &quot;Sue&quot;        &quot;Johanna&quot;    &quot;Lilly&quot;      &quot;Lucinda&quot;    &quot;Minerva&quot;    &quot;Lettie&quot;     &quot;Roxie&quot;      &quot;Cynthia&quot;    &quot;Helena&quot;    
##  [199] &quot;Hilda&quot;      &quot;Hulda&quot;      &quot;Bernice&quot;    &quot;Genevieve&quot;  &quot;Jean&quot;       &quot;Cordelia&quot;   &quot;Marian&quot;     &quot;Francis&quot;    &quot;Jeanette&quot;   &quot;Adeline&quot;    &quot;Gussie&quot;    
##  [210] &quot;Leah&quot;       &quot;Lois&quot;       &quot;Lura&quot;       &quot;Mittie&quot;     &quot;Hallie&quot;     &quot;Isabella&quot;   &quot;Olga&quot;       &quot;Phoebe&quot;     &quot;Teresa&quot;     &quot;Hester&quot;     &quot;Lida&quot;      
##  [221] &quot;Lina&quot;       &quot;Winnie&quot;     &quot;Claudia&quot;    &quot;Marguerite&quot; &quot;Vera&quot;       &quot;Cecelia&quot;    &quot;Bess&quot;       &quot;Emilie&quot;     &quot;John&quot;       &quot;Rosetta&quot;    &quot;Verna&quot;     
##  [232] &quot;Myrtie&quot;     &quot;Cecilia&quot;    &quot;Elva&quot;       &quot;Olivia&quot;     &quot;Ophelia&quot;    &quot;Georgie&quot;    &quot;Elnora&quot;     &quot;Violet&quot;     &quot;Adele&quot;      &quot;Lily&quot;       &quot;Linnie&quot;    
##  [243] &quot;Loretta&quot;    &quot;Madge&quot;      &quot;Polly&quot;      &quot;Virgie&quot;     &quot;Eugenia&quot;    &quot;Lucile&quot;     &quot;Lucille&quot;    &quot;Mabelle&quot;    &quot;Rosalie&quot;    &quot;Kittie&quot;     &quot;Meta&quot;      
##  [254] &quot;Angie&quot;      &quot;Dessie&quot;     &quot;Georgiana&quot;  &quot;Lila&quot;       &quot;Regina&quot;     &quot;Selma&quot;      &quot;Wilhelmina&quot; &quot;Bridget&quot;    &quot;Lilla&quot;      &quot;Malinda&quot;    &quot;Vina&quot;      
##  [265] &quot;Freda&quot;      &quot;Gertie&quot;     &quot;Jeannette&quot;  &quot;Louella&quot;    &quot;Mandy&quot;      &quot;Roberta&quot;    &quot;Cassie&quot;     &quot;Corinne&quot;    &quot;Ivy&quot;        &quot;Melissa&quot;    &quot;Lyda&quot;      
##  [276] &quot;Naomi&quot;      &quot;Norma&quot;      &quot;Bell&quot;       &quot;Margie&quot;     &quot;Nona&quot;       &quot;Zella&quot;      &quot;Dovie&quot;      &quot;Elvira&quot;     &quot;Erma&quot;       &quot;Irma&quot;       &quot;Leota&quot;     
##  [287] &quot;William&quot;    &quot;Artie&quot;      &quot;Blanch&quot;     &quot;Charity&quot;    &quot;Lorena&quot;     &quot;Lucretia&quot;   &quot;Orpha&quot;      &quot;Alvina&quot;     &quot;Annette&quot;    &quot;Catharine&quot;  &quot;Elma&quot;      
##  [298] &quot;Geneva&quot;     &quot;Janet&quot;      &quot;Lee&quot;        &quot;Leora&quot;      &quot;Lona&quot;       &quot;Miriam&quot;     &quot;Zora&quot;       &quot;Linda&quot;      &quot;Octavia&quot;    &quot;Sudie&quot;      &quot;Zula&quot;      
##  [309] &quot;Adella&quot;     &quot;Alpha&quot;      &quot;Frieda&quot;     &quot;George&quot;     &quot;Joanna&quot;     &quot;Leonora&quot;    &quot;Priscilla&quot;  &quot;Tennie&quot;     &quot;Angeline&quot;   &quot;Docia&quot;      &quot;Ettie&quot;     
##  [320] &quot;Flossie&quot;    &quot;Hanna&quot;      &quot;Letha&quot;      &quot;Minta&quot;      &quot;Retta&quot;      &quot;Rosella&quot;    &quot;Adah&quot;       &quot;Berta&quot;      &quot;Elisabeth&quot;  &quot;Elise&quot;      &quot;Goldie&quot;    
##  [331] &quot;Leola&quot;      &quot;Margret&quot;    &quot;Adaline&quot;    &quot;Floy&quot;       &quot;Idella&quot;     &quot;Juanita&quot;    &quot;Lenna&quot;      &quot;Lucie&quot;      &quot;Missouri&quot;   &quot;Nola&quot;       &quot;Zoe&quot;       
##  [342] &quot;Eda&quot;        &quot;Isabell&quot;    &quot;James&quot;      &quot;Julie&quot;      &quot;Letitia&quot;    &quot;Madeline&quot;   &quot;Malissa&quot;    &quot;Mariah&quot;     &quot;Pattie&quot;     &quot;Vivian&quot;     &quot;Almeda&quot;    
##  [353] &quot;Aurelia&quot;    &quot;Claire&quot;     &quot;Dolly&quot;      &quot;Hazel&quot;      &quot;Jannie&quot;     &quot;Kathleen&quot;   &quot;Kathrine&quot;   &quot;Lavinia&quot;    &quot;Marietta&quot;   &quot;Melvina&quot;    &quot;Ona&quot;       
##  [364] &quot;Pinkie&quot;     &quot;Samantha&quot;   &quot;Susanna&quot;    &quot;Chloe&quot;      &quot;Donnie&quot;     &quot;Elsa&quot;       &quot;Gladys&quot;     &quot;Matie&quot;      &quot;Pearle&quot;     &quot;Vesta&quot;      &quot;Vinnie&quot;    
##  [375] &quot;Antoinette&quot; &quot;Clementine&quot; &quot;Edythe&quot;     &quot;Harriette&quot;  &quot;Libbie&quot;     &quot;Lilian&quot;     &quot;Lue&quot;        &quot;Lutie&quot;      &quot;Magdalena&quot;  &quot;Meda&quot;       &quot;Rita&quot;      
##  [386] &quot;Tena&quot;       &quot;Zelma&quot;      &quot;Adelia&quot;     &quot;Annetta&quot;    &quot;Antonia&quot;    &quot;Dona&quot;       &quot;Elizebeth&quot;  &quot;Georgianna&quot; &quot;Gracie&quot;     &quot;Iona&quot;       &quot;Lessie&quot;    
##  [397] &quot;Leta&quot;       &quot;Liza&quot;       &quot;Mertie&quot;     &quot;Molly&quot;      &quot;Neva&quot;       &quot;Oma&quot;        &quot;Alida&quot;      &quot;Alva&quot;       &quot;Cecile&quot;     &quot;Cleo&quot;       &quot;Donna&quot;     
##  [408] &quot;Ellie&quot;      &quot;Ernestine&quot;  &quot;Evie&quot;       &quot;Frankie&quot;    &quot;Helene&quot;     &quot;Minna&quot;      &quot;Myrta&quot;      &quot;Prudence&quot;   &quot;Queen&quot;      &quot;Rilla&quot;      &quot;Savannah&quot;  
##  [419] &quot;Tessie&quot;     &quot;Tina&quot;       &quot;Agatha&quot;     &quot;America&quot;    &quot;Anita&quot;      &quot;Arminta&quot;    &quot;Dorothea&quot;   &quot;Ira&quot;        &quot;Luvenia&quot;    &quot;Marjorie&quot;   &quot;Maybelle&quot;  
##  [430] &quot;Mellie&quot;     &quot;Nan&quot;        &quot;Pearlie&quot;    &quot;Sidney&quot;     &quot;Velma&quot;      &quot;Clare&quot;      &quot;Constance&quot;  &quot;Dixie&quot;      &quot;Ila&quot;        &quot;Iola&quot;       &quot;Jimmie&quot;    
##  [441] &quot;Louvenia&quot;   &quot;Lucia&quot;      &quot;Ludie&quot;      &quot;Luna&quot;       &quot;Metta&quot;      &quot;Patsy&quot;      &quot;Phebe&quot;      &quot;Sophronia&quot;  &quot;Adda&quot;       &quot;Avis&quot;       &quot;Betsy&quot;     
##  [452] &quot;Bonnie&quot;     &quot;Cecil&quot;      &quot;Cordie&quot;     &quot;Emmaline&quot;   &quot;Ethelyn&quot;    &quot;Hortense&quot;   &quot;June&quot;       &quot;Louie&quot;      &quot;Lovie&quot;      &quot;Marcella&quot;   &quot;Melinda&quot;   
##  [463] &quot;Mona&quot;       &quot;Odessa&quot;     &quot;Veronica&quot;   &quot;Aimee&quot;      &quot;Annabel&quot;    &quot;Ava&quot;        &quot;Bella&quot;      &quot;Carolina&quot;   &quot;Cathrine&quot;   &quot;Christena&quot;  &quot;Clyde&quot;     
##  [474] &quot;Dena&quot;       &quot;Dolores&quot;    &quot;Eleanore&quot;   &quot;Elmira&quot;     &quot;Fay&quot;        &quot;Frank&quot;      &quot;Jenny&quot;      &quot;Kizzie&quot;     &quot;Lonnie&quot;     &quot;Loula&quot;      &quot;Magdalene&quot; 
##  [485] &quot;Mettie&quot;     &quot;Mintie&quot;     &quot;Peggy&quot;      &quot;Reba&quot;       &quot;Serena&quot;     &quot;Vida&quot;       &quot;Zada&quot;       &quot;Abigail&quot;    &quot;Celestine&quot;  &quot;Celina&quot;     &quot;Claudie&quot;   
##  [496] &quot;Clemmie&quot;    &quot;Connie&quot;     &quot;Daisie&quot;     &quot;Deborah&quot;    &quot;Dessa&quot;      &quot;Easter&quot;     &quot;Eddie&quot;      &quot;Emelia&quot;     &quot;Emmie&quot;      &quot;Imogene&quot;    &quot;India&quot;     
##  [507] &quot;Jeanne&quot;     &quot;Joan&quot;       &quot;Lenore&quot;     &quot;Liddie&quot;     &quot;Lotta&quot;      &quot;Mame&quot;       &quot;Nevada&quot;     &quot;Rachael&quot;    &quot;Robert&quot;     &quot;Sina&quot;       &quot;Willa&quot;     
##  [518] &quot;Aline&quot;      &quot;Beryl&quot;      &quot;Charles&quot;    &quot;Daisey&quot;     &quot;Dorcas&quot;     &quot;Edmonia&quot;    &quot;Effa&quot;       &quot;Eldora&quot;     &quot;Eloise&quot;     &quot;Emmer&quot;      &quot;Era&quot;       
##  [529] &quot;Gena&quot;       &quot;Henry&quot;      &quot;Iris&quot;       &quot;Izora&quot;      &quot;Lennie&quot;     &quot;Lissie&quot;     &quot;Mallie&quot;     &quot;Malvina&quot;    &quot;Mathilde&quot;   &quot;Mazie&quot;      &quot;Queenie&quot;   
##  [540] &quot;Rosina&quot;     &quot;Salome&quot;     &quot;Theodora&quot;   &quot;Therese&quot;    &quot;Vena&quot;       &quot;Wanda&quot;      &quot;Wilda&quot;      &quot;Altha&quot;      &quot;Anastasia&quot;  &quot;Besse&quot;      &quot;Bird&quot;      
##  [551] &quot;Birtie&quot;     &quot;Clarissa&quot;   &quot;Claude&quot;     &quot;Delilah&quot;    &quot;Diana&quot;      &quot;Emelie&quot;     &quot;Erna&quot;       &quot;Fern&quot;       &quot;Florida&quot;    &quot;Frona&quot;      &quot;Hilma&quot;     
##  [562] &quot;Joseph&quot;     &quot;Juliet&quot;     &quot;Leonie&quot;     &quot;Lugenia&quot;    &quot;Mammie&quot;     &quot;Manda&quot;      &quot;Manerva&quot;    &quot;Manie&quot;      &quot;Nella&quot;      &quot;Paulina&quot;    &quot;Philomena&quot; 
##  [573] &quot;Rae&quot;        &quot;Selina&quot;     &quot;Sena&quot;       &quot;Theodosia&quot;  &quot;Tommie&quot;     &quot;Una&quot;        &quot;Vernie&quot;     &quot;Adela&quot;      &quot;Althea&quot;     &quot;Amalia&quot;     &quot;Amber&quot;     
##  [584] &quot;Angelina&quot;   &quot;Annabelle&quot;  &quot;Anner&quot;      &quot;Arie&quot;       &quot;Clarice&quot;    &quot;Corda&quot;      &quot;Corrie&quot;     &quot;Dell&quot;       &quot;Dellar&quot;     &quot;Donie&quot;      &quot;Doris&quot;     
##  [595] &quot;Elda&quot;       &quot;Elinor&quot;     &quot;Emeline&quot;    &quot;Emilia&quot;     &quot;Esta&quot;       &quot;Estell&quot;     &quot;Etha&quot;       &quot;Fred&quot;       &quot;Hope&quot;       &quot;Indiana&quot;    &quot;Ione&quot;      
##  [606] &quot;Jettie&quot;     &quot;Johnnie&quot;    &quot;Josiephine&quot; &quot;Kitty&quot;      &quot;Lavina&quot;     &quot;Leda&quot;       &quot;Letta&quot;      &quot;Mahala&quot;     &quot;Marcia&quot;     &quot;Margarette&quot; &quot;Maudie&quot;    
##  [617] &quot;Maye&quot;       &quot;Norah&quot;      &quot;Oda&quot;        &quot;Patty&quot;      &quot;Paula&quot;      &quot;Permelia&quot;   &quot;Rosalia&quot;    &quot;Roxanna&quot;    &quot;Sula&quot;       &quot;Vada&quot;       &quot;Winnifred&quot; 
##  [628] &quot;Adline&quot;     &quot;Almira&quot;     &quot;Alvena&quot;     &quot;Arizona&quot;    &quot;Becky&quot;      &quot;Bennie&quot;     &quot;Bernadette&quot; &quot;Camille&quot;    &quot;Cordia&quot;     &quot;Corine&quot;     &quot;Dicie&quot;     
##  [639] &quot;Dove&quot;       &quot;Drusilla&quot;   &quot;Elena&quot;      &quot;Elenora&quot;    &quot;Elmina&quot;     &quot;Ethyl&quot;      &quot;Evalyn&quot;     &quot;Evelina&quot;    &quot;Faye&quot;       &quot;Huldah&quot;     &quot;Idell&quot;     
##  [650] &quot;Inga&quot;       &quot;Irena&quot;      &quot;Jewell&quot;     &quot;Kattie&quot;     &quot;Lavenia&quot;    &quot;Leslie&quot;     &quot;Lovina&quot;     &quot;Lulie&quot;      &quot;Magnolia&quot;   &quot;Margeret&quot;   &quot;Margery&quot;   
##  [661] &quot;Media&quot;      &quot;Millicent&quot;  &quot;Nena&quot;       &quot;Ocie&quot;       &quot;Orilla&quot;     &quot;Osie&quot;       &quot;Pansy&quot;      &quot;Ray&quot;        &quot;Rosia&quot;      &quot;Rowena&quot;     &quot;Shirley&quot;   
##  [672] &quot;Tabitha&quot;    &quot;Thomas&quot;     &quot;Verdie&quot;     &quot;Walter&quot;     &quot;Zetta&quot;      &quot;Zoa&quot;        &quot;Zona&quot;       &quot;Albertina&quot;  &quot;Albina&quot;     &quot;Alyce&quot;      &quot;Amie&quot;      
##  [683] &quot;Angela&quot;     &quot;Annis&quot;      &quot;Carol&quot;      &quot;Carra&quot;      &quot;Clarence&quot;   &quot;Clarinda&quot;   &quot;Delphia&quot;    &quot;Dillie&quot;     &quot;Doshie&quot;     &quot;Drucilla&quot;   &quot;Etna&quot;      
##  [694] &quot;Eugenie&quot;    &quot;Eulalia&quot;    &quot;Eve&quot;        &quot;Felicia&quot;    &quot;Florance&quot;   &quot;Fronie&quot;     &quot;Geraldine&quot;  &quot;Gina&quot;       &quot;Glenna&quot;     &quot;Grayce&quot;     &quot;Hedwig&quot;    
##  [705] &quot;Jessica&quot;    &quot;Jossie&quot;     &quot;Katheryn&quot;   &quot;Katy&quot;       &quot;Lea&quot;        &quot;Leanna&quot;     &quot;Leitha&quot;     &quot;Leone&quot;      &quot;Lidie&quot;      &quot;Loma&quot;       &quot;Lular&quot;     
##  [716] &quot;Magdalen&quot;   &quot;Maymie&quot;     &quot;Minervia&quot;   &quot;Muriel&quot;     &quot;Neppie&quot;     &quot;Olie&quot;       &quot;Onie&quot;       &quot;Osa&quot;        &quot;Otelia&quot;     &quot;Paralee&quot;    &quot;Patience&quot;  
##  [727] &quot;Rella&quot;      &quot;Rillie&quot;     &quot;Rosanna&quot;    &quot;Theo&quot;       &quot;Tilda&quot;      &quot;Tishie&quot;     &quot;Tressa&quot;     &quot;Viva&quot;       &quot;Yetta&quot;      &quot;Zena&quot;       &quot;Zola&quot;      
##  [738] &quot;Abby&quot;       &quot;Aileen&quot;     &quot;Alba&quot;       &quot;Alda&quot;       &quot;Alla&quot;       &quot;Alverta&quot;    &quot;Ara&quot;        &quot;Ardelia&quot;    &quot;Ardella&quot;    &quot;Arrie&quot;      &quot;Arvilla&quot;   
##  [749] &quot;Augustine&quot;  &quot;Aurora&quot;     &quot;Bama&quot;       &quot;Bena&quot;       &quot;Byrd&quot;       &quot;Calla&quot;      &quot;Camilla&quot;    &quot;Carey&quot;      &quot;Carlotta&quot;   &quot;Celestia&quot;   &quot;Cherry&quot;    
##  [760] &quot;Cinda&quot;      &quot;Classie&quot;    &quot;Claudine&quot;   &quot;Clemie&quot;     &quot;Clifford&quot;   &quot;Clyda&quot;      &quot;Creola&quot;     &quot;Debbie&quot;     &quot;Dee&quot;        &quot;Dinah&quot;      &quot;Doshia&quot;    
##  [771] &quot;Ednah&quot;      &quot;Edyth&quot;      &quot;Eleanora&quot;   &quot;Electa&quot;     &quot;Eola&quot;       &quot;Erie&quot;       &quot;Eudora&quot;     &quot;Euphemia&quot;   &quot;Evalena&quot;    &quot;Evaline&quot;    &quot;Faith&quot;     
##  [782] &quot;Fidelia&quot;    &quot;Freddie&quot;    &quot;Golda&quot;      &quot;Harry&quot;      &quot;Helma&quot;      &quot;Hermine&quot;    &quot;Hessie&quot;     &quot;Ivah&quot;       &quot;Janette&quot;    &quot;Jennette&quot;   &quot;Joella&quot;    
##  [793] &quot;Kathryne&quot;   &quot;Lacy&quot;       &quot;Lanie&quot;      &quot;Lauretta&quot;   &quot;Leana&quot;      &quot;Leatha&quot;     &quot;Leo&quot;        &quot;Liller&quot;     &quot;Lillis&quot;     &quot;Louetta&quot;    &quot;Madie&quot;     
##  [804] &quot;Mai&quot;        &quot;Martina&quot;    &quot;Maryann&quot;    &quot;Melva&quot;      &quot;Mena&quot;       &quot;Mercedes&quot;   &quot;Merle&quot;      &quot;Mima&quot;       &quot;Minda&quot;      &quot;Monica&quot;     &quot;Nealie&quot;    
##  [815] &quot;Netta&quot;      &quot;Nolia&quot;      &quot;Nonie&quot;      &quot;Odelia&quot;     &quot;Ottilie&quot;    &quot;Phyllis&quot;    &quot;Robbie&quot;     &quot;Sabina&quot;     &quot;Sada&quot;       &quot;Sammie&quot;     &quot;Suzanne&quot;   
##  [826] &quot;Sybilla&quot;    &quot;Thea&quot;       &quot;Tressie&quot;    &quot;Vallie&quot;     &quot;Venie&quot;      &quot;Viney&quot;      &quot;Wilhelmine&quot; &quot;Winona&quot;     &quot;Zelda&quot;      &quot;Zilpha&quot;     &quot;Adelle&quot;    
##  [837] &quot;Adina&quot;      &quot;Adrienne&quot;   &quot;Albertine&quot;  &quot;Alys&quot;       &quot;Ana&quot;        &quot;Araminta&quot;   &quot;Arthur&quot;     &quot;Birtha&quot;     &quot;Bulah&quot;      &quot;Caddie&quot;     &quot;Celie&quot;     
##  [848] &quot;Charlotta&quot;  &quot;Clair&quot;      &quot;Concepcion&quot; &quot;Cordella&quot;   &quot;Corrine&quot;    &quot;Delila&quot;     &quot;Delphine&quot;   &quot;Dosha&quot;      &quot;Edgar&quot;      &quot;Elaine&quot;     &quot;Elisa&quot;     
##  [859] &quot;Ellar&quot;      &quot;Elmire&quot;     &quot;Elvina&quot;     &quot;Ena&quot;        &quot;Estie&quot;      &quot;Etter&quot;      &quot;Fronnie&quot;    &quot;Genie&quot;      &quot;Georgina&quot;   &quot;Glenn&quot;      &quot;Gracia&quot;    
##  [870] &quot;Guadalupe&quot;  &quot;Gwendolyn&quot;  &quot;Hassie&quot;     &quot;Honora&quot;     &quot;Icy&quot;        &quot;Isa&quot;        &quot;Isadora&quot;    &quot;Jesse&quot;      &quot;Jewel&quot;      &quot;Joe&quot;        &quot;Johannah&quot;  
##  [881] &quot;Juana&quot;      &quot;Judith&quot;     &quot;Judy&quot;       &quot;Junie&quot;      &quot;Lavonia&quot;    &quot;Lella&quot;      &quot;Lemma&quot;      &quot;Letty&quot;      &quot;Linna&quot;      &quot;Littie&quot;     &quot;Lollie&quot;    
##  [892] &quot;Lorene&quot;     &quot;Louis&quot;      &quot;Love&quot;       &quot;Lovisa&quot;     &quot;Lucina&quot;     &quot;Lynn&quot;       &quot;Madora&quot;     &quot;Mahalia&quot;    &quot;Manervia&quot;   &quot;Manuela&quot;    &quot;Margarett&quot; 
##  [903] &quot;Margaretta&quot; &quot;Margarita&quot;  &quot;Marilla&quot;    &quot;Mignon&quot;     &quot;Mozella&quot;    &quot;Natalie&quot;    &quot;Nelia&quot;      &quot;Nolie&quot;      &quot;Omie&quot;       &quot;Opal&quot;       &quot;Ossie&quot;     
##  [914] &quot;Ottie&quot;      &quot;Ottilia&quot;    &quot;Parthenia&quot;  &quot;Penelope&quot;   &quot;Pinkey&quot;     &quot;Pollie&quot;     &quot;Rennie&quot;     &quot;Reta&quot;       &quot;Roena&quot;      &quot;Rosalee&quot;    &quot;Roseanna&quot;  
##  [925] &quot;Ruthie&quot;     &quot;Sabra&quot;      &quot;Sannie&quot;     &quot;Selena&quot;     &quot;Sibyl&quot;      &quot;Tella&quot;      &quot;Tempie&quot;     &quot;Tennessee&quot;  &quot;Teressa&quot;    &quot;Texas&quot;      &quot;Theda&quot;     
##  [936] &quot;Thelma&quot;     &quot;Thursa&quot;     &quot;Ula&quot;        &quot;Vannie&quot;     &quot;Verona&quot;     &quot;Vertie&quot;     &quot;Wilma&quot;      &quot;John&quot;       &quot;William&quot;    &quot;James&quot;      &quot;Charles&quot;   
##  [947] &quot;George&quot;     &quot;Frank&quot;      &quot;Joseph&quot;     &quot;Thomas&quot;     &quot;Henry&quot;      &quot;Robert&quot;     &quot;Edward&quot;     &quot;Harry&quot;      &quot;Walter&quot;     &quot;Arthur&quot;     &quot;Fred&quot;      
##  [958] &quot;Albert&quot;     &quot;Samuel&quot;     &quot;David&quot;      &quot;Louis&quot;      &quot;Joe&quot;        &quot;Charlie&quot;    &quot;Clarence&quot;   &quot;Richard&quot;    &quot;Andrew&quot;     &quot;Daniel&quot;     &quot;Ernest&quot;    
##  [969] &quot;Will&quot;       &quot;Jesse&quot;      &quot;Oscar&quot;      &quot;Lewis&quot;      &quot;Peter&quot;      &quot;Benjamin&quot;   &quot;Frederick&quot;  &quot;Willie&quot;     &quot;Alfred&quot;     &quot;Sam&quot;        &quot;Roy&quot;       
##  [980] &quot;Herbert&quot;    &quot;Jacob&quot;      &quot;Tom&quot;        &quot;Elmer&quot;      &quot;Carl&quot;       &quot;Lee&quot;        &quot;Howard&quot;     &quot;Martin&quot;     &quot;Michael&quot;    &quot;Bert&quot;       &quot;Herman&quot;    
##  [991] &quot;Jim&quot;        &quot;Francis&quot;    &quot;Harvey&quot;     &quot;Earl&quot;       &quot;Eugene&quot;     &quot;Ralph&quot;      &quot;Ed&quot;         &quot;Claude&quot;     &quot;Edwin&quot;      &quot;Ben&quot;       
##  [ reached getOption(&quot;max.print&quot;) -- omitted 1923665 entries ]</code></pre>
<p>Let’s use str_detect() to find all of the names that include a ‘sh’ sound:</p>
<p>As you see, str_detect() runs as a <em>boolean operator</em>, in that it ascribes a <em>TRUE</em> or <em>FALSE</em> value for each entry in the column, based on our conditional statement: is there a ‘sh’ in the character string?</p>
<p>Let’s combine our previous experience with ggplot to write a long, complicated set of code that will visualize the <em>most popular names starting in ‘Sh’ for women born in 1938:</em></p>
<div class="sourceCode" id="cb160"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb160-1"><a href="text-analysis.html#cb160-1" aria-hidden="true" tabindex="-1"></a>babynames <span class="sc">%&gt;%</span> </span>
<span id="cb160-2"><a href="text-analysis.html#cb160-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">str_detect</span>(name, <span class="st">&quot;Sh&quot;</span>) <span class="sc">&amp;</span> sex<span class="sc">==</span><span class="st">&quot;F&quot;</span> <span class="sc">&amp;</span> year <span class="sc">==</span> <span class="dv">1938</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb160-3"><a href="text-analysis.html#cb160-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(prop)) <span class="sc">%&gt;%</span> </span>
<span id="cb160-4"><a href="text-analysis.html#cb160-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>(<span class="dv">20</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb160-5"><a href="text-analysis.html#cb160-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="fu">reorder</span>(name,prop),prop,  <span class="at">fill =</span> name)) <span class="sc">+</span> </span>
<span id="cb160-6"><a href="text-analysis.html#cb160-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>() <span class="sc">+</span></span>
<span id="cb160-7"><a href="text-analysis.html#cb160-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_flip</span>()</span></code></pre></div>
<p><img src="bookdownproj_files/figure-html/unnamed-chunk-61-1.png" width="672" /></p>
<p>Let’s fancy that up a bit, by calculating a ‘percentage’ of use of that name per year / per gender:</p>
<div class="sourceCode" id="cb161"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb161-1"><a href="text-analysis.html#cb161-1" aria-hidden="true" tabindex="-1"></a>babynames <span class="sc">%&gt;%</span> </span>
<span id="cb161-2"><a href="text-analysis.html#cb161-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">str_detect</span>(name, <span class="st">&quot;Sh&quot;</span>) <span class="sc">&amp;</span> sex<span class="sc">==</span><span class="st">&quot;F&quot;</span> <span class="sc">&amp;</span> year <span class="sc">==</span> <span class="dv">1938</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb161-3"><a href="text-analysis.html#cb161-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(prop)) <span class="sc">%&gt;%</span> </span>
<span id="cb161-4"><a href="text-analysis.html#cb161-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>(<span class="dv">20</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb161-5"><a href="text-analysis.html#cb161-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">percent =</span> (prop <span class="sc">*</span> <span class="dv">100</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb161-6"><a href="text-analysis.html#cb161-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="fu">reorder</span>(name,percent),percent,  <span class="at">fill =</span> name)) <span class="sc">+</span> </span>
<span id="cb161-7"><a href="text-analysis.html#cb161-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>() <span class="sc">+</span></span>
<span id="cb161-8"><a href="text-analysis.html#cb161-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_flip</span>()</span></code></pre></div>
<p><img src="bookdownproj_files/figure-html/unnamed-chunk-62-1.png" width="672" /></p>
<p>how many ‘z’ names since 2000?</p>
<div class="sourceCode" id="cb162"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb162-1"><a href="text-analysis.html#cb162-1" aria-hidden="true" tabindex="-1"></a>babynames <span class="sc">%&gt;%</span> </span>
<span id="cb162-2"><a href="text-analysis.html#cb162-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(year <span class="sc">&gt;</span> <span class="dv">2000</span> <span class="sc">&amp;</span> <span class="fu">str_detect</span>(name, <span class="st">&quot;Z&quot;</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb162-3"><a href="text-analysis.html#cb162-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(prop))</span></code></pre></div>
<pre><code>## # A tibble: 13,018 × 5
##     year sex   name        n    prop
##    &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt;   &lt;int&gt;   &lt;dbl&gt;
##  1  2001 M     Zachary 18186 0.00880
##  2  2002 M     Zachary 16622 0.00805
##  3  2003 M     Zachary 15539 0.00740
##  4  2004 M     Zachary 13711 0.00649
##  5  2005 M     Zachary 12283 0.00578
##  6  2006 M     Zachary 11005 0.00502
##  7  2007 M     Zachary 10212 0.00461
##  8  2008 M     Zachary  9226 0.00424
##  9  2012 F     Zoey     7466 0.00386
## 10  2009 M     Zachary  8078 0.00381
## # … with 13,008 more rows</code></pre>
<p>Why did R only pull out the names starting with Z? Because we capitalized it. How do we get both?</p>
<div class="sourceCode" id="cb164"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb164-1"><a href="text-analysis.html#cb164-1" aria-hidden="true" tabindex="-1"></a>    babynames <span class="sc">%&gt;%</span> </span>
<span id="cb164-2"><a href="text-analysis.html#cb164-2" aria-hidden="true" tabindex="-1"></a>      <span class="fu">mutate</span>(<span class="at">Z =</span> <span class="fu">str_count</span>(babynames<span class="sc">$</span>name, <span class="st">&quot;[zZ]&quot;</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb164-3"><a href="text-analysis.html#cb164-3" aria-hidden="true" tabindex="-1"></a>      <span class="fu">arrange</span>(<span class="fu">desc</span>(prop))</span></code></pre></div>
<pre><code>## # A tibble: 1,924,665 × 6
##     year sex   name        n   prop     Z
##    &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt;   &lt;int&gt;  &lt;dbl&gt; &lt;int&gt;
##  1  1880 M     John     9655 0.0815     0
##  2  1881 M     John     8769 0.0810     0
##  3  1880 M     William  9532 0.0805     0
##  4  1883 M     John     8894 0.0791     0
##  5  1881 M     William  8524 0.0787     0
##  6  1882 M     John     9557 0.0783     0
##  7  1884 M     John     9388 0.0765     0
##  8  1882 M     William  9298 0.0762     0
##  9  1886 M     John     9026 0.0758     0
## 10  1885 M     John     8756 0.0755     0
## # … with 1,924,655 more rows</code></pre>
<p>Instead of arranging our data by name popularity, let’s look at the names with the <em>most</em> z’s in them:</p>
<div class="sourceCode" id="cb166"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb166-1"><a href="text-analysis.html#cb166-1" aria-hidden="true" tabindex="-1"></a>    babynames <span class="sc">%&gt;%</span> </span>
<span id="cb166-2"><a href="text-analysis.html#cb166-2" aria-hidden="true" tabindex="-1"></a>      <span class="fu">mutate</span>(<span class="at">Z =</span> <span class="fu">str_count</span>(babynames<span class="sc">$</span>name, <span class="st">&quot;[zZ]&quot;</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb166-3"><a href="text-analysis.html#cb166-3" aria-hidden="true" tabindex="-1"></a>      <span class="fu">arrange</span>(<span class="fu">desc</span>(Z))</span></code></pre></div>
<pre><code>## # A tibble: 1,924,665 × 6
##     year sex   name       n       prop     Z
##    &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt;  &lt;int&gt;      &lt;dbl&gt; &lt;int&gt;
##  1  2010 M     Zzyzx      5 0.00000244     3
##  2  1880 F     Lizzie   388 0.00398        2
##  3  1880 F     Kizzie    13 0.000133       2
##  4  1881 F     Lizzie   396 0.00401        2
##  5  1881 F     Kizzie     9 0.0000910      2
##  6  1882 F     Lizzie   495 0.00428        2
##  7  1882 F     Kizzie     9 0.0000778      2
##  8  1882 F     Dezzie     5 0.0000432      2
##  9  1883 F     Lizzie   496 0.00413        2
## 10  1883 F     Kizzie    14 0.000117       2
## # … with 1,924,655 more rows</code></pre>
<p>What if, instead of specifying a particular letter, we just wanted to count the most frequent first letters in names?</p>
<div class="sourceCode" id="cb168"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb168-1"><a href="text-analysis.html#cb168-1" aria-hidden="true" tabindex="-1"></a>    babynames <span class="sc">%&gt;%</span> </span>
<span id="cb168-2"><a href="text-analysis.html#cb168-2" aria-hidden="true" tabindex="-1"></a>      <span class="fu">mutate</span>(<span class="at">first_letter =</span> <span class="fu">substr</span>(name, <span class="dv">1</span>,<span class="dv">1</span>)) <span class="ot">-&gt;</span> baby_letters</span></code></pre></div>
<p>Let’s plot that:</p>
<div class="sourceCode" id="cb169"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb169-1"><a href="text-analysis.html#cb169-1" aria-hidden="true" tabindex="-1"></a>    baby_letters <span class="sc">%&gt;%</span> </span>
<span id="cb169-2"><a href="text-analysis.html#cb169-2" aria-hidden="true" tabindex="-1"></a>      <span class="fu">count</span>(first_letter, <span class="at">sort =</span> <span class="cn">TRUE</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb169-3"><a href="text-analysis.html#cb169-3" aria-hidden="true" tabindex="-1"></a>      <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="fu">reorder</span>(first_letter, n),n)) <span class="sc">+</span> </span>
<span id="cb169-4"><a href="text-analysis.html#cb169-4" aria-hidden="true" tabindex="-1"></a>      <span class="fu">geom_col</span>() <span class="sc">+</span></span>
<span id="cb169-5"><a href="text-analysis.html#cb169-5" aria-hidden="true" tabindex="-1"></a>      <span class="fu">coord_flip</span>()</span></code></pre></div>
<p><img src="bookdownproj_files/figure-html/unnamed-chunk-67-1.png" width="672" /></p>
<p>We can also use stringr to calculate the length of all of our strings. What is the frequency of the shortest and longest names?</p>
<div class="sourceCode" id="cb170"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb170-1"><a href="text-analysis.html#cb170-1" aria-hidden="true" tabindex="-1"></a>    babynames <span class="sc">%&gt;%</span> </span>
<span id="cb170-2"><a href="text-analysis.html#cb170-2" aria-hidden="true" tabindex="-1"></a>      <span class="fu">mutate</span>(<span class="at">length =</span> <span class="fu">str_length</span>(name)) <span class="ot">-&gt;</span> babynames_length</span></code></pre></div>
</div>
<div id="average-name-length-over-time-1" class="section level3 hasAnchor" number="4.1.2">
<h3><span class="header-section-number">4.1.2</span> Average name length over time<a href="text-analysis.html#average-name-length-over-time-1" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Now, if we want to see the average length of a names over time, the code gets a little mroe advanced - note the <em>mean</em> function we haven’t used like this before:</p>
<div class="sourceCode" id="cb171"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb171-1"><a href="text-analysis.html#cb171-1" aria-hidden="true" tabindex="-1"></a>    babynames_length <span class="sc">%&gt;%</span> </span>
<span id="cb171-2"><a href="text-analysis.html#cb171-2" aria-hidden="true" tabindex="-1"></a>      <span class="fu">group_by</span>(year) <span class="sc">%&gt;%</span> </span>
<span id="cb171-3"><a href="text-analysis.html#cb171-3" aria-hidden="true" tabindex="-1"></a>      <span class="fu">summarise_at</span>(<span class="fu">vars</span>(length), <span class="fu">funs</span>(<span class="fu">mean</span>(.))) <span class="sc">%&gt;%</span> </span>
<span id="cb171-4"><a href="text-analysis.html#cb171-4" aria-hidden="true" tabindex="-1"></a>      <span class="fu">ggplot</span>(<span class="fu">aes</span>(year, length)) <span class="sc">+</span> <span class="fu">geom_line</span>()</span></code></pre></div>
<p><img src="bookdownproj_files/figure-html/unnamed-chunk-69-1.png" width="672" /></p>
<p>The results are impressive. Let’s split them up by Sex:</p>
<div class="sourceCode" id="cb172"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb172-1"><a href="text-analysis.html#cb172-1" aria-hidden="true" tabindex="-1"></a>    babynames_length <span class="sc">%&gt;%</span> </span>
<span id="cb172-2"><a href="text-analysis.html#cb172-2" aria-hidden="true" tabindex="-1"></a>      <span class="fu">group_by</span>(year, sex) <span class="sc">%&gt;%</span> </span>
<span id="cb172-3"><a href="text-analysis.html#cb172-3" aria-hidden="true" tabindex="-1"></a>      <span class="fu">summarise_at</span>(<span class="fu">vars</span>(length), <span class="fu">funs</span>(<span class="fu">mean</span>(.))) <span class="sc">%&gt;%</span> </span>
<span id="cb172-4"><a href="text-analysis.html#cb172-4" aria-hidden="true" tabindex="-1"></a>      <span class="fu">ggplot</span>(<span class="fu">aes</span>(year, length, <span class="at">color =</span> sex)) <span class="sc">+</span> <span class="fu">geom_line</span>()</span></code></pre></div>
<p><img src="bookdownproj_files/figure-html/unnamed-chunk-70-1.png" width="672" /></p>
</div>
<div id="common-issue-example-most-common-3-letter-names" class="section level3 hasAnchor" number="4.1.3">
<h3><span class="header-section-number">4.1.3</span> Common issue: (example: most common 3-letter names)<a href="text-analysis.html#common-issue-example-most-common-3-letter-names" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>As mentioned in the last Chapter, summarise() is confusing. In the case of babynames, you’ll know to use it when you keep getting the same results over and over, and you want to group those names together. Let’s take a look at this issue by calculating the most common 3-letter names:</p>
<div class="sourceCode" id="cb173"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb173-1"><a href="text-analysis.html#cb173-1" aria-hidden="true" tabindex="-1"></a>    babynames_length <span class="sc">%&gt;%</span> </span>
<span id="cb173-2"><a href="text-analysis.html#cb173-2" aria-hidden="true" tabindex="-1"></a>      <span class="fu">filter</span>(length <span class="sc">==</span> <span class="dv">3</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb173-3"><a href="text-analysis.html#cb173-3" aria-hidden="true" tabindex="-1"></a>      <span class="fu">arrange</span>(<span class="fu">desc</span>(prop))</span></code></pre></div>
<pre><code>## # A tibble: 41,274 × 6
##     year sex   name      n   prop length
##    &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt; &lt;int&gt;  &lt;dbl&gt;  &lt;int&gt;
##  1  1975 F     Amy   32252 0.0207      3
##  2  1976 F     Amy   31341 0.0199      3
##  3  1974 F     Amy   29564 0.0189      3
##  4  1973 F     Amy   26964 0.0174      3
##  5  1977 F     Amy   26731 0.0163      3
##  6  1972 F     Amy   25873 0.0160      3
##  7  1880 F     Ida    1472 0.0151      3
##  8  1971 F     Amy   26238 0.0150      3
##  9  1881 F     Ida    1439 0.0146      3
## 10  1882 F     Ida    1673 0.0145      3
## # … with 41,264 more rows</code></pre>
<p>We get a lot of repeated names. Time to summarize!</p>
<div class="sourceCode" id="cb175"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb175-1"><a href="text-analysis.html#cb175-1" aria-hidden="true" tabindex="-1"></a>    babynames_length <span class="sc">%&gt;%</span> </span>
<span id="cb175-2"><a href="text-analysis.html#cb175-2" aria-hidden="true" tabindex="-1"></a>      <span class="fu">filter</span>(length <span class="sc">==</span> <span class="dv">3</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb175-3"><a href="text-analysis.html#cb175-3" aria-hidden="true" tabindex="-1"></a>      <span class="fu">group_by</span>(name) <span class="sc">%&gt;%</span> </span>
<span id="cb175-4"><a href="text-analysis.html#cb175-4" aria-hidden="true" tabindex="-1"></a>      <span class="fu">summarise</span>(<span class="at">total =</span> <span class="fu">sum</span>(n) ) <span class="sc">%&gt;%</span> </span>
<span id="cb175-5"><a href="text-analysis.html#cb175-5" aria-hidden="true" tabindex="-1"></a>      <span class="fu">arrange</span>(<span class="fu">desc</span>(total))</span></code></pre></div>
<pre><code>## # A tibble: 970 × 2
##    name   total
##    &lt;chr&gt;  &lt;int&gt;
##  1 Amy   692096
##  2 Ann   469710
##  3 Joe   462099
##  4 Roy   407020
##  5 Lee   292891
##  6 Eva   263741
##  7 Ava   251052
##  8 Ian   222950
##  9 Mia   216774
## 10 Kim   214365
## # … with 960 more rows</code></pre>
<p>Let’s try that again, with 2-letter names:</p>
<div class="sourceCode" id="cb177"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb177-1"><a href="text-analysis.html#cb177-1" aria-hidden="true" tabindex="-1"></a>    babynames_length <span class="sc">%&gt;%</span> </span>
<span id="cb177-2"><a href="text-analysis.html#cb177-2" aria-hidden="true" tabindex="-1"></a>      <span class="fu">filter</span>(length <span class="sc">==</span> <span class="dv">2</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb177-3"><a href="text-analysis.html#cb177-3" aria-hidden="true" tabindex="-1"></a>      <span class="fu">group_by</span>(name) <span class="sc">%&gt;%</span> </span>
<span id="cb177-4"><a href="text-analysis.html#cb177-4" aria-hidden="true" tabindex="-1"></a>      <span class="fu">summarize</span>(<span class="at">total =</span> <span class="fu">sum</span>(n)) <span class="sc">%&gt;%</span> </span>
<span id="cb177-5"><a href="text-analysis.html#cb177-5" aria-hidden="true" tabindex="-1"></a>      <span class="fu">arrange</span>(<span class="fu">desc</span>(total)) </span></code></pre></div>
<pre><code>## # A tibble: 149 × 2
##    name   total
##    &lt;chr&gt;  &lt;int&gt;
##  1 Jo    180579
##  2 Ty     45278
##  3 Ed     26330
##  4 Al     17221
##  5 Bo     10856
##  6 Lu      4013
##  7 Cy      3418
##  8 Wm      2737
##  9 Kc      2585
## 10 An      2048
## # … with 139 more rows</code></pre>
<p>What is the longest name?</p>
<div class="sourceCode" id="cb179"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb179-1"><a href="text-analysis.html#cb179-1" aria-hidden="true" tabindex="-1"></a>    babynames_length <span class="sc">%&gt;%</span> </span>
<span id="cb179-2"><a href="text-analysis.html#cb179-2" aria-hidden="true" tabindex="-1"></a>      <span class="fu">arrange</span>(<span class="fu">desc</span>(length))</span></code></pre></div>
<pre><code>## # A tibble: 1,924,665 × 6
##     year sex   name                n       prop length
##    &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt;           &lt;int&gt;      &lt;dbl&gt;  &lt;int&gt;
##  1  1978 M     Christophermich     5 0.00000293     15
##  2  1979 M     Johnchristopher     5 0.00000279     15
##  3  1980 M     Christophermich     7 0.00000377     15
##  4  1980 M     Christopherjohn     5 0.0000027      15
##  5  1981 F     Mariadelrosario     5 0.0000028      15
##  6  1981 M     Christopherjohn     5 0.00000268     15
##  7  1982 F     Mariadelosangel     6 0.00000331     15
##  8  1982 M     Christopherjohn     6 0.00000318     15
##  9  1982 M     Christophermich     5 0.00000265     15
## 10  1983 M     Christopherjohn     8 0.00000429     15
## # … with 1,924,655 more rows</code></pre>
<p>How many 15 letter names are there?</p>
<div class="sourceCode" id="cb181"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb181-1"><a href="text-analysis.html#cb181-1" aria-hidden="true" tabindex="-1"></a>    babynames_length <span class="sc">%&gt;%</span> </span>
<span id="cb181-2"><a href="text-analysis.html#cb181-2" aria-hidden="true" tabindex="-1"></a>      <span class="fu">filter</span>(length <span class="sc">==</span> <span class="dv">15</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb181-3"><a href="text-analysis.html#cb181-3" aria-hidden="true" tabindex="-1"></a>      <span class="fu">count</span>(name, <span class="at">sort =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<pre><code>## # A tibble: 34 × 2
##    name                n
##    &lt;chr&gt;           &lt;int&gt;
##  1 Christopherjohn    19
##  2 Johnchristopher    17
##  3 Christopherjame    16
##  4 Franciscojavier    16
##  5 Christophermich     8
##  6 Ryanchristopher     7
##  7 Christianjoseph     4
##  8 Christopherjose     4
##  9 Jonathanmichael     4
## 10 Mariadelosangel     4
## # … with 24 more rows</code></pre>
<p>Let’s plot those names:</p>
<div class="sourceCode" id="cb183"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb183-1"><a href="text-analysis.html#cb183-1" aria-hidden="true" tabindex="-1"></a>    babynames <span class="sc">%&gt;%</span> </span>
<span id="cb183-2"><a href="text-analysis.html#cb183-2" aria-hidden="true" tabindex="-1"></a>      <span class="fu">filter</span>(name <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;Christopherjohn&quot;</span>,<span class="st">&quot;Johnchristopher&quot;</span>,<span class="st">&quot;Christopherjame&quot;</span>,<span class="st">&quot;Franciscojavier&quot;</span>, <span class="st">&quot;Christophermich&quot;</span>, <span class="st">&quot;Ryanchristopher&quot;</span>,<span class="st">&quot;Christianjoseph&quot;</span>, <span class="st">&quot;Christopherjose&quot;</span>, <span class="st">&quot;Jonathanmichael&quot;</span>, <span class="st">&quot;Mariadelosangel&quot;</span>  </span>
<span id="cb183-3"><a href="text-analysis.html#cb183-3" aria-hidden="true" tabindex="-1"></a>      )) <span class="sc">%&gt;%</span> </span>
<span id="cb183-4"><a href="text-analysis.html#cb183-4" aria-hidden="true" tabindex="-1"></a>      <span class="fu">ggplot</span>(<span class="fu">aes</span>(year, prop, <span class="at">color =</span> name)) <span class="sc">+</span> <span class="fu">geom_line</span>() </span></code></pre></div>
<p><img src="bookdownproj_files/figure-html/unnamed-chunk-76-1.png" width="672" /></p>
<p>By the look of these names, it’s clear that most of them are actually <em>longer</em> than 15 characters - but 15 characters is the cut-off point for the column. Thus, we cannot accurately estimate the most common 15-letter names.</p>
<p>Along similar lines, an analysis of the methodology behind <em>babynames</em> shows that only names that have <em>at least 5 instances in a given year</em> are recorded. So it’d be similarly futile for us to attempt to measure the <em>rarest</em> names, as they are excluded in the database. (It also helps clarify why some rarer names seem to ‘disappear’ in certain years.)</p>
<p>OK, what else can stringr do?</p>
<p>How about the average number of vowels per name?</p>
<div class="sourceCode" id="cb184"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb184-1"><a href="text-analysis.html#cb184-1" aria-hidden="true" tabindex="-1"></a> <span class="fu">str_count</span>(babynames<span class="sc">$</span>name, <span class="st">&quot;[aeiou]&quot;</span>)</span></code></pre></div>
<pre><code>##    [1] 1 1 1 3 3 3 1 2 2 2 2 2 1 3 2 2 3 3 2 3 3 2 3 3 3 3 3 1 3 2 4 3 1 3 2 3 4 1 2 1 1 2 2 1 1 3 2 2 3 4 2 2 4 1 3 2 1 3 2 2 1 1 2 3 3 2 3 2 3 2 2 1 3 3 4
##   [76] 3 2 2 2 2 3 1 2 4 2 2 3 3 2 2 3 3 1 3 2 3 2 2 4 1 3 2 1 1 3 4 2 0 2 2 2 3 3 1 4 3 2 3 3 1 2 0 3 3 2 3 3 3 1 4 3 2 1 2 2 1 3 3 2 3 1 2 3 2 3 3 4 4 1 3
##  [151] 1 3 3 4 3 3 2 1 3 3 2 2 2 3 3 1 1 2 3 1 2 4 2 2 2 2 3 2 2 3 3 3 1 1 3 4 3 3 2 2 3 1 3 3 3 3 2 3 2 2 3 5 2 4 3 2 4 3 3 2 2 2 3 3 3 1 3 3 2 2 2 3 4 5 2
##  [226] 4 1 3 1 3 2 2 4 1 3 3 4 2 3 2 1 3 3 2 1 3 4 3 3 3 4 3 2 2 3 5 2 3 2 4 2 2 3 2 2 3 4 4 1 3 3 3 0 3 1 3 2 1 3 2 2 3 2 1 1 3 3 2 1 2 3 4 1 2 2 4 1 3 2 2
##  [301] 3 2 3 2 2 3 3 2 2 1 3 3 3 4 3 3 3 3 2 3 2 2 2 2 3 1 2 3 2 3 3 2 3 1 2 4 2 3 4 2 2 1 2 2 3 4 4 3 3 3 3 2 4 3 1 2 3 3 3 4 4 3 1 3 3 3 2 3 1 1 3 3 2 3 4
##  [376] 4 1 4 3 3 2 3 4 2 2 2 2 3 2 3 2 3 5 3 2 3 2 2 3 1 2 1 2 1 3 2 2 2 3 2 3 3 2 1 3 3 2 3 3 2 2 3 2 2 4 1 4 4 3 3 1 4 2 2 2 3 3 1 2 3 5 3 3 2 2 1 2 4 1 1
##  [451] 1 3 2 3 3 1 3 2 4 3 3 3 2 2 4 3 2 1 2 4 3 3 1 2 3 4 2 1 1 1 3 3 3 4 3 3 1 2 3 2 2 3 4 3 4 3 3 4 3 2 2 2 3 2 3 2 3 2 3 3 2 2 3 3 2 2 2 2 1 2 3 2 3 1 2
##  [526] 3 1 1 2 1 1 2 3 3 3 3 3 3 5 3 3 4 3 2 2 2 1 4 2 1 3 3 3 3 3 3 1 1 3 2 2 2 3 4 4 3 2 3 3 2 4 4 2 3 2 5 3 1 3 2 2 3 1 3 3 1 2 3 2 3 1 2 3 2 1 2 3 3 1 1
##  [601] 1 1 2 3 2 3 3 5 1 3 2 2 3 3 4 4 2 2 1 1 3 4 4 3 2 2 3 2 2 2 3 1 3 4 3 3 3 3 2 3 2 3 2 0 1 3 2 2 1 1 2 2 3 4 3 3 3 4 3 2 3 3 2 2 2 2 1 1 3 3 2 3 2 3 2
##  [676] 2 2 2 3 2 1 2 2 1 2 2 3 3 3 3 3 3 1 4 4 1 4 3 3 4 2 2 2 2 3 3 2 1 2 3 3 3 3 2 2 3 3 4 3 3 2 2 1 3 4 4 2 3 3 2 2 3 2 2 2 2 2 0 3 1 1 1 2 1 3 2 2 2 4 3
##  [751] 2 2 0 2 3 2 3 4 1 2 3 4 3 2 1 3 3 2 2 3 1 0 4 2 2 2 3 4 3 3 2 4 3 2 1 2 3 3 1 3 3 3 2 1 3 4 3 3 2 2 2 4 3 2 3 2 2 2 3 2 2 2 3 4 2 3 3 3 3 1 3 3 2 3 3
##  [826] 2 2 3 3 3 2 4 3 2 2 2 2 3 3 0 1 3 1 2 2 3 3 3 2 4 3 3 3 3 2 1 3 2 1 2 2 1 2 1 3 3 4 1 3 5 2 3 3 0 1 3 2 2 2 3 3 2 1 3 4 2 2 1 2 3 3 3 3 2 3 3 0 3 4 4
##  [901] 4 3 4 4 3 2 3 4 3 3 2 1 2 2 3 4 4 2 3 3 2 3 4 4 3 2 3 3 1 2 3 4 3 2 2 2 2 1 3 3 3 2 1 3 2 2 3 1 2 2 1 2 1 1 2 1 1 1 3 2 3 2 3 3 2 1 3 1 1 2 1 2 2 3 3
##  [976] 3 1 1 1 2 2 1 1 1 2 2 2 3 1 2 1 2 2 1 3 1 0 3 1 1
##  [ reached getOption(&quot;max.print&quot;) -- omitted 1923665 entries ]</code></pre>
<p>That’s a lot of numbers. Let’s calculate a mean value instead:</p>
<div class="sourceCode" id="cb186"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb186-1"><a href="text-analysis.html#cb186-1" aria-hidden="true" tabindex="-1"></a> <span class="fu">mean</span>(<span class="fu">str_count</span>(babynames<span class="sc">$</span>name, <span class="st">&quot;[aeiou]&quot;</span>))</span></code></pre></div>
<pre><code>## [1] 2.420695</code></pre>
<p>How about consonants?</p>
<div class="sourceCode" id="cb188"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb188-1"><a href="text-analysis.html#cb188-1" aria-hidden="true" tabindex="-1"></a>     <span class="fu">mean</span>(<span class="fu">str_count</span>(babynames<span class="sc">$</span>name, <span class="st">&quot;[bcdfghjklmnpqrstvwxyz]&quot;</span>))</span></code></pre></div>
<pre><code>## [1] 2.752322</code></pre>
<p>Example ideas for further exploration:</p>
<p>How many names contain ‘liz’ in them?</p>
<div class="sourceCode" id="cb190"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb190-1"><a href="text-analysis.html#cb190-1" aria-hidden="true" tabindex="-1"></a>    babynames <span class="sc">%&gt;%</span> </span>
<span id="cb190-2"><a href="text-analysis.html#cb190-2" aria-hidden="true" tabindex="-1"></a>      <span class="fu">filter</span>(<span class="fu">str_detect</span>(babynames<span class="sc">$</span>name, <span class="st">&quot;liz&quot;</span>) )  <span class="sc">%&gt;%</span> </span>
<span id="cb190-3"><a href="text-analysis.html#cb190-3" aria-hidden="true" tabindex="-1"></a>      <span class="fu">count</span>(name, <span class="at">sort =</span> <span class="cn">TRUE</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb190-4"><a href="text-analysis.html#cb190-4" aria-hidden="true" tabindex="-1"></a>      <span class="fu">head</span>(<span class="dv">20</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb190-5"><a href="text-analysis.html#cb190-5" aria-hidden="true" tabindex="-1"></a>      <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="fu">reorder</span>(name, n),n)) <span class="sc">+</span> <span class="fu">geom_col</span>() <span class="sc">+</span> </span>
<span id="cb190-6"><a href="text-analysis.html#cb190-6" aria-hidden="true" tabindex="-1"></a>      <span class="fu">coord_flip</span>()</span></code></pre></div>
<p><img src="bookdownproj_files/figure-html/unnamed-chunk-80-1.png" width="672" /></p>
<p>Case Study: Born Without A (Proper) Name</p>
<p>There are a number of names in the database that are totally anonymous. When, and why?</p>
<div class="sourceCode" id="cb191"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb191-1"><a href="text-analysis.html#cb191-1" aria-hidden="true" tabindex="-1"></a>babynames <span class="sc">%&gt;%</span> </span>
<span id="cb191-2"><a href="text-analysis.html#cb191-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(name <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;Unknown&quot;</span>, <span class="st">&quot;Unnamed&quot;</span>, <span class="st">&quot;Infant&quot;</span>, <span class="st">&quot;Infantof&quot;</span>, <span class="st">&quot;Notnamed&quot;</span>, <span class="st">&quot;Baby&quot;</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb191-3"><a href="text-analysis.html#cb191-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(year, prop, <span class="at">color =</span> name)) <span class="sc">+</span> <span class="fu">geom_line</span>() <span class="sc">+</span> <span class="fu">facet_wrap</span>(<span class="sc">~</span>sex)</span></code></pre></div>
<p><img src="bookdownproj_files/figure-html/unnamed-chunk-81-1.png" width="672" /></p>
<p>Let’s compare this to the number of unique names per year:</p>
<div class="sourceCode" id="cb192"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb192-1"><a href="text-analysis.html#cb192-1" aria-hidden="true" tabindex="-1"></a>babynames <span class="sc">%&gt;%</span> </span>
<span id="cb192-2"><a href="text-analysis.html#cb192-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(year) <span class="sc">%&gt;%</span> </span>
<span id="cb192-3"><a href="text-analysis.html#cb192-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">annual =</span> <span class="fu">n_distinct</span>(name)) <span class="sc">%&gt;%</span> </span>
<span id="cb192-4"><a href="text-analysis.html#cb192-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(year, annual )) <span class="sc">+</span> <span class="fu">geom_line</span>()</span></code></pre></div>
<p><img src="bookdownproj_files/figure-html/unnamed-chunk-82-1.png" width="672" /></p>
<p><em>Babynames</em> also includes a data set called births, that simply lists out the total number of births per year:</p>
<div class="sourceCode" id="cb193"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb193-1"><a href="text-analysis.html#cb193-1" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(births)</span>
<span id="cb193-2"><a href="text-analysis.html#cb193-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(births, <span class="fu">aes</span>(year, births)) <span class="sc">+</span> <span class="fu">geom_line</span>()</span></code></pre></div>
<p><img src="bookdownproj_files/figure-html/unnamed-chunk-83-1.png" width="672" /></p>
<p>Why are these last two graphs different? Because the first is counting names, the second is counting births. And most babies have names that are shared with other babies, especially in the same year.</p>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="statistical-analyses-of-a-single-variable.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="geo-spatial-analysis-and-visualizations.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/jennyjiangke/book/edit/master/04-Text_Analysis.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": "https://github.com/jennyjiangke/book/blob/master/04-Text_Analysis.Rmd",
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
