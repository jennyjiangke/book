<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 2 Manipulating Data | Media Analytics With R</title>
  <meta name="description" content="Chapter 2 Manipulating Data | Media Analytics With R" />
  <meta name="generator" content="bookdown 0.26 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 2 Manipulating Data | Media Analytics With R" />
  <meta property="og:type" content="book" />
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 2 Manipulating Data | Media Analytics With R" />
  
  
  

<meta name="author" content="Jenny Jiang &amp; Brian Walsh" />


<meta name="date" content="2023-03-16" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="intro-to-programming-in-r.html"/>
<link rel="next" href="statistical-analyses-of-a-single-variable.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>
<script src="libs/kePrint-0.0.1/kePrint.js"></script>
<link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet" />
<link href="libs/font-awesome-5.13.0/css/all.min.css" rel="stylesheet" />
<link href="libs/font-awesome-5.13.0/css/v4-shims.min.css" rel="stylesheet" />
<script src="libs/htmlwidgets-1.5.4/htmlwidgets.js"></script>
<link href="libs/wordcloud2-0.0.1/wordcloud.css" rel="stylesheet" />
<script src="libs/wordcloud2-0.0.1/wordcloud2-all.js"></script>
<script src="libs/wordcloud2-0.0.1/hover.js"></script>
<script src="libs/wordcloud2-binding-0.2.1/wordcloud2.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Media Analytics with R</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Preface</a>
<ul>
<li class="chapter" data-level="0.1" data-path="index.html"><a href="index.html#who-is-this-book-for"><i class="fa fa-check"></i><b>0.1</b> Who is this book for?</a></li>
<li class="chapter" data-level="0.2" data-path="index.html"><a href="index.html#why-r"><i class="fa fa-check"></i><b>0.2</b> Why R?</a></li>
<li class="chapter" data-level="0.3" data-path="index.html"><a href="index.html#what-will-we-learn-to-do-with-r-in-this-book"><i class="fa fa-check"></i><b>0.3</b> What will we learn to do with R in this book?</a></li>
<li class="chapter" data-level="0.4" data-path="index.html"><a href="index.html#installing-the-software"><i class="fa fa-check"></i><b>0.4</b> Installing the Software</a></li>
<li class="chapter" data-level="0.5" data-path="index.html"><a href="index.html#getting-started"><i class="fa fa-check"></i><b>0.5</b> Getting Started</a></li>
<li class="chapter" data-level="0.6" data-path="index.html"><a href="index.html#r-studio-projects"><i class="fa fa-check"></i><b>0.6</b> R Studio Projects</a></li>
</ul></li>
<li class="chapter" data-level="1" data-path="intro-to-programming-in-r.html"><a href="intro-to-programming-in-r.html"><i class="fa fa-check"></i><b>1</b> Intro to Programming in R</a>
<ul>
<li class="chapter" data-level="1.1" data-path="intro-to-programming-in-r.html"><a href="intro-to-programming-in-r.html#creating-a-new-project-in-r-studio"><i class="fa fa-check"></i><b>1.1</b> Creating a New Project in R Studio</a></li>
<li class="chapter" data-level="1.2" data-path="intro-to-programming-in-r.html"><a href="intro-to-programming-in-r.html#loading-packages-and-data"><i class="fa fa-check"></i><b>1.2</b> Loading Packages and Data</a></li>
<li class="chapter" data-level="1.3" data-path="intro-to-programming-in-r.html"><a href="intro-to-programming-in-r.html#section"><i class="fa fa-check"></i><b>1.3</b> %&gt;%</a></li>
<li class="chapter" data-level="1.4" data-path="intro-to-programming-in-r.html"><a href="intro-to-programming-in-r.html#filtering-data"><i class="fa fa-check"></i><b>1.4</b> Filtering Data</a></li>
<li class="chapter" data-level="1.5" data-path="intro-to-programming-in-r.html"><a href="intro-to-programming-in-r.html#visualizing"><i class="fa fa-check"></i><b>1.5</b> Visualizing</a></li>
<li class="chapter" data-level="1.6" data-path="intro-to-programming-in-r.html"><a href="intro-to-programming-in-r.html#syntax"><i class="fa fa-check"></i><b>1.6</b> Syntax</a></li>
<li class="chapter" data-level="1.7" data-path="intro-to-programming-in-r.html"><a href="intro-to-programming-in-r.html#creating-variables"><i class="fa fa-check"></i><b>1.7</b> Creating Variables</a></li>
<li class="chapter" data-level="1.8" data-path="intro-to-programming-in-r.html"><a href="intro-to-programming-in-r.html#modifying-data"><i class="fa fa-check"></i><b>1.8</b> Modifying Data</a></li>
<li class="chapter" data-level="1.9" data-path="intro-to-programming-in-r.html"><a href="intro-to-programming-in-r.html#count"><i class="fa fa-check"></i><b>1.9</b> Count</a></li>
<li class="chapter" data-level="1.10" data-path="intro-to-programming-in-r.html"><a href="intro-to-programming-in-r.html#more-aesthetics"><i class="fa fa-check"></i><b>1.10</b> More Aesthetics</a></li>
<li class="chapter" data-level="1.11" data-path="intro-to-programming-in-r.html"><a href="intro-to-programming-in-r.html#review"><i class="fa fa-check"></i><b>1.11</b> Review</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="manipulating-data.html"><a href="manipulating-data.html"><i class="fa fa-check"></i><b>2</b> Manipulating Data</a>
<ul>
<li class="chapter" data-level="2.1" data-path="manipulating-data.html"><a href="manipulating-data.html#mutate"><i class="fa fa-check"></i><b>2.1</b> Mutate</a></li>
<li class="chapter" data-level="2.2" data-path="manipulating-data.html"><a href="manipulating-data.html#group_by-summarize"><i class="fa fa-check"></i><b>2.2</b> Group_by , Summarize()</a></li>
<li class="chapter" data-level="2.3" data-path="manipulating-data.html"><a href="manipulating-data.html#working-with-strings"><i class="fa fa-check"></i><b>2.3</b> Working with Strings</a>
<ul>
<li class="chapter" data-level="2.3.1" data-path="manipulating-data.html"><a href="manipulating-data.html#practical-applications-of-stringr"><i class="fa fa-check"></i><b>2.3.1</b> Practical Applications of Stringr</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="manipulating-data.html"><a href="manipulating-data.html#average-name-length-over-time"><i class="fa fa-check"></i><b>2.4</b> Average name length over time</a></li>
<li class="chapter" data-level="2.5" data-path="manipulating-data.html"><a href="manipulating-data.html#revisiting-summarize"><i class="fa fa-check"></i><b>2.5</b> Revisiting summarize()</a></li>
<li class="chapter" data-level="2.6" data-path="manipulating-data.html"><a href="manipulating-data.html#additional-functions"><i class="fa fa-check"></i><b>2.6</b> Additional Functions</a></li>
<li class="chapter" data-level="2.7" data-path="manipulating-data.html"><a href="manipulating-data.html#case-study-born-without-a-proper-name"><i class="fa fa-check"></i><b>2.7</b> Case Study: Born Without A (Proper) Name</a></li>
<li class="chapter" data-level="2.8" data-path="manipulating-data.html"><a href="manipulating-data.html#assignment"><i class="fa fa-check"></i><b>2.8</b> Assignment</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="statistical-analyses-of-a-single-variable.html"><a href="statistical-analyses-of-a-single-variable.html"><i class="fa fa-check"></i><b>3</b> Statistical Analyses of a Single Variable</a>
<ul>
<li class="chapter" data-level="3.1" data-path="statistical-analyses-of-a-single-variable.html"><a href="statistical-analyses-of-a-single-variable.html#variables-levels-of-measurement"><i class="fa fa-check"></i><b>3.1</b> Variables &amp; Levels of Measurement</a>
<ul>
<li class="chapter" data-level="3.1.1" data-path="statistical-analyses-of-a-single-variable.html"><a href="statistical-analyses-of-a-single-variable.html#nominal-data"><i class="fa fa-check"></i><b>3.1.1</b> Nominal Data</a></li>
<li class="chapter" data-level="3.1.2" data-path="statistical-analyses-of-a-single-variable.html"><a href="statistical-analyses-of-a-single-variable.html#ordinal-data"><i class="fa fa-check"></i><b>3.1.2</b> Ordinal Data</a></li>
<li class="chapter" data-level="3.1.3" data-path="statistical-analyses-of-a-single-variable.html"><a href="statistical-analyses-of-a-single-variable.html#interval-data"><i class="fa fa-check"></i><b>3.1.3</b> Interval Data</a></li>
<li class="chapter" data-level="3.1.4" data-path="statistical-analyses-of-a-single-variable.html"><a href="statistical-analyses-of-a-single-variable.html#ratio-data"><i class="fa fa-check"></i><b>3.1.4</b> Ratio Data</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="statistical-analyses-of-a-single-variable.html"><a href="statistical-analyses-of-a-single-variable.html#frequency-distribution"><i class="fa fa-check"></i><b>3.2</b> Frequency Distribution</a></li>
<li class="chapter" data-level="3.3" data-path="statistical-analyses-of-a-single-variable.html"><a href="statistical-analyses-of-a-single-variable.html#percentage-change"><i class="fa fa-check"></i><b>3.3</b> Percentage Change</a></li>
<li class="chapter" data-level="3.4" data-path="statistical-analyses-of-a-single-variable.html"><a href="statistical-analyses-of-a-single-variable.html#relative-frequency"><i class="fa fa-check"></i><b>3.4</b> Relative Frequency</a></li>
<li class="chapter" data-level="3.5" data-path="statistical-analyses-of-a-single-variable.html"><a href="statistical-analyses-of-a-single-variable.html#percentage-points"><i class="fa fa-check"></i><b>3.5</b> Percentage Points</a></li>
<li class="chapter" data-level="3.6" data-path="statistical-analyses-of-a-single-variable.html"><a href="statistical-analyses-of-a-single-variable.html#rate"><i class="fa fa-check"></i><b>3.6</b> Rate</a></li>
<li class="chapter" data-level="3.7" data-path="statistical-analyses-of-a-single-variable.html"><a href="statistical-analyses-of-a-single-variable.html#ratio"><i class="fa fa-check"></i><b>3.7</b> Ratio</a></li>
<li class="chapter" data-level="3.8" data-path="statistical-analyses-of-a-single-variable.html"><a href="statistical-analyses-of-a-single-variable.html#central-tendency"><i class="fa fa-check"></i><b>3.8</b> Central Tendency</a></li>
<li class="chapter" data-level="3.9" data-path="statistical-analyses-of-a-single-variable.html"><a href="statistical-analyses-of-a-single-variable.html#data-variation"><i class="fa fa-check"></i><b>3.9</b> Data Variation</a></li>
<li class="chapter" data-level="3.10" data-path="statistical-analyses-of-a-single-variable.html"><a href="statistical-analyses-of-a-single-variable.html#assignment-analyzing-a-single-variable"><i class="fa fa-check"></i><b>3.10</b> Assignment: Analyzing a Single Variable</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="statistical-analyses-of-two-variables.html"><a href="statistical-analyses-of-two-variables.html"><i class="fa fa-check"></i><b>4</b> Statistical Analyses of Two Variables</a>
<ul>
<li class="chapter" data-level="4.1" data-path="statistical-analyses-of-two-variables.html"><a href="statistical-analyses-of-two-variables.html#cross-tab"><i class="fa fa-check"></i><b>4.1</b> Cross-tab</a></li>
<li class="chapter" data-level="4.2" data-path="statistical-analyses-of-two-variables.html"><a href="statistical-analyses-of-two-variables.html#independent-variable-vs.-dependent-variable"><i class="fa fa-check"></i><b>4.2</b> Independent Variable VS. Dependent Variable</a></li>
<li class="chapter" data-level="4.3" data-path="statistical-analyses-of-two-variables.html"><a href="statistical-analyses-of-two-variables.html#independent-sample-t-test"><i class="fa fa-check"></i><b>4.3</b> Independent sample T-Test</a>
<ul>
<li class="chapter" data-level="4.3.1" data-path="statistical-analyses-of-two-variables.html"><a href="statistical-analyses-of-two-variables.html#anova"><i class="fa fa-check"></i><b>4.3.1</b> ANOVA</a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="statistical-analyses-of-two-variables.html"><a href="statistical-analyses-of-two-variables.html#correlation"><i class="fa fa-check"></i><b>4.4</b> Correlation</a></li>
<li class="chapter" data-level="4.5" data-path="statistical-analyses-of-two-variables.html"><a href="statistical-analyses-of-two-variables.html#regression"><i class="fa fa-check"></i><b>4.5</b> Regression</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="statistical-analyses-of-three-or-more-variables-modelling.html"><a href="statistical-analyses-of-three-or-more-variables-modelling.html"><i class="fa fa-check"></i><b>5</b> Statistical Analyses of Three or More Variables &amp; Modelling</a>
<ul>
<li class="chapter" data-level="5.1" data-path="statistical-analyses-of-three-or-more-variables-modelling.html"><a href="statistical-analyses-of-three-or-more-variables-modelling.html#linear-regression"><i class="fa fa-check"></i><b>5.1</b> linear Regression</a></li>
<li class="chapter" data-level="5.2" data-path="statistical-analyses-of-three-or-more-variables-modelling.html"><a href="statistical-analyses-of-three-or-more-variables-modelling.html#interaction-effects"><i class="fa fa-check"></i><b>5.2</b> Interaction Effects</a></li>
<li class="chapter" data-level="5.3" data-path="statistical-analyses-of-three-or-more-variables-modelling.html"><a href="statistical-analyses-of-three-or-more-variables-modelling.html#assignment-1"><i class="fa fa-check"></i><b>5.3</b> Assignment</a>
<ul>
<li class="chapter" data-level="5.3.1" data-path="statistical-analyses-of-three-or-more-variables-modelling.html"><a href="statistical-analyses-of-three-or-more-variables-modelling.html#linear-regression-and-correlation"><i class="fa fa-check"></i><b>5.3.1</b> Linear Regression and Correlation</a></li>
<li class="chapter" data-level="5.3.2" data-path="statistical-analyses-of-three-or-more-variables-modelling.html"><a href="statistical-analyses-of-three-or-more-variables-modelling.html#multiple-regression-analysis"><i class="fa fa-check"></i><b>5.3.2</b> Multiple Regression Analysis</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="accessing-twitters-api-in-r.html"><a href="accessing-twitters-api-in-r.html"><i class="fa fa-check"></i><b>6</b> Accessing Twitter’s API in R</a>
<ul>
<li class="chapter" data-level="6.1" data-path="accessing-twitters-api-in-r.html"><a href="accessing-twitters-api-in-r.html#making-your-first-request-to-the-new-twitter-api-v2"><i class="fa fa-check"></i><b>6.1</b> Making Your First Request to the New Twitter API v2</a></li>
<li class="chapter" data-level="6.2" data-path="accessing-twitters-api-in-r.html"><a href="accessing-twitters-api-in-r.html#using-you-twitter-app-in-r"><i class="fa fa-check"></i><b>6.2</b> Using You Twitter App in R</a></li>
<li class="chapter" data-level="6.3" data-path="accessing-twitters-api-in-r.html"><a href="accessing-twitters-api-in-r.html#analyzing-twitter-data"><i class="fa fa-check"></i><b>6.3</b> Analyzing Twitter Data</a>
<ul>
<li class="chapter" data-level="6.3.1" data-path="accessing-twitters-api-in-r.html"><a href="accessing-twitters-api-in-r.html#lubridate-working-with-time"><i class="fa fa-check"></i><b>6.3.1</b> Lubridate &amp; Working with Time</a></li>
<li class="chapter" data-level="6.3.2" data-path="accessing-twitters-api-in-r.html"><a href="accessing-twitters-api-in-r.html#tweet-source"><i class="fa fa-check"></i><b>6.3.2</b> Tweet Source</a></li>
<li class="chapter" data-level="6.3.3" data-path="accessing-twitters-api-in-r.html"><a href="accessing-twitters-api-in-r.html#text-analysis-in-twitter"><i class="fa fa-check"></i><b>6.3.3</b> Text Analysis in Twitter</a></li>
</ul></li>
<li class="chapter" data-level="6.4" data-path="accessing-twitters-api-in-r.html"><a href="accessing-twitters-api-in-r.html#search-keywordssearch-users-by-keywordshashtags"><i class="fa fa-check"></i><b>6.4</b> Search Keywords/Search Users by Keywords/Hashtags</a></li>
<li class="chapter" data-level="6.5" data-path="accessing-twitters-api-in-r.html"><a href="accessing-twitters-api-in-r.html#assignment-2"><i class="fa fa-check"></i><b>6.5</b> Assignment</a>
<ul>
<li class="chapter" data-level="6.5.1" data-path="accessing-twitters-api-in-r.html"><a href="accessing-twitters-api-in-r.html#sample-code"><i class="fa fa-check"></i><b>6.5.1</b> Sample code</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="7" data-path="text-analysis.html"><a href="text-analysis.html"><i class="fa fa-check"></i><b>7</b> Text Analysis</a></li>
<li class="chapter" data-level="8" data-path="network-analysis.html"><a href="network-analysis.html"><i class="fa fa-check"></i><b>8</b> Network Analysis</a></li>
<li class="chapter" data-level="9" data-path="geo-spatial-analysis-and-visualizations.html"><a href="geo-spatial-analysis-and-visualizations.html"><i class="fa fa-check"></i><b>9</b> Geo-Spatial Analysis and Visualizations</a></li>
<li class="chapter" data-level="10" data-path="publishing.html"><a href="publishing.html"><i class="fa fa-check"></i><b>10</b> Publishing</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Media Analytics With R</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="manipulating-data" class="section level1 hasAnchor" number="2">
<h1><span class="header-section-number">Chapter 2</span> Manipulating Data<a href="manipulating-data.html#manipulating-data" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p>I encourage you to play around with <em>babynames</em> and get more comfortable deliberately modifying data before continuing. Or, if you’re getting sick of babies, you can use these tidyverse functions on any dataset. Let’s try using one of R’s built-in ones, <strong>mtcars:</strong></p>
<div class="sourceCode" id="cb49"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb49-1"><a href="manipulating-data.html#cb49-1" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(mtcars)</span>
<span id="cb49-2"><a href="manipulating-data.html#cb49-2" aria-hidden="true" tabindex="-1"></a><span class="fu">View</span>(mtcars)</span></code></pre></div>
<p>The data is lots of older car performance statistics. Let’s try comparing weight to mpg:</p>
<div class="sourceCode" id="cb50"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb50-1"><a href="manipulating-data.html#cb50-1" aria-hidden="true" tabindex="-1"></a>mtcars <span class="sc">%&gt;%</span> </span>
<span id="cb50-2"><a href="manipulating-data.html#cb50-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(wt, mpg)) <span class="sc">+</span> <span class="fu">geom_point</span>()</span></code></pre></div>
<p><img src="bookdownproj_files/figure-html/mtcars2-1.png" width="672" /></p>
<p>geom_point() creates a <em>scatterplot</em>, but we can also see hints of an overall trend, or correlation here - so let’s add that to the ggplot():</p>
<div class="sourceCode" id="cb51"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb51-1"><a href="manipulating-data.html#cb51-1" aria-hidden="true" tabindex="-1"></a>mtcars <span class="sc">%&gt;%</span> </span>
<span id="cb51-2"><a href="manipulating-data.html#cb51-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(wt, mpg)) <span class="sc">+</span> <span class="fu">geom_point</span>() <span class="sc">+</span> <span class="fu">geom_smooth</span>()</span></code></pre></div>
<pre><code>## `geom_smooth()` using method = &#39;loess&#39; and formula = &#39;y ~ x&#39;</code></pre>
<p><img src="bookdownproj_files/figure-html/mtcars3-1.png" width="672" /></p>
<p>Let’s try adding color based on a variable:</p>
<div class="sourceCode" id="cb53"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb53-1"><a href="manipulating-data.html#cb53-1" aria-hidden="true" tabindex="-1"></a>mtcars <span class="sc">%&gt;%</span> </span>
<span id="cb53-2"><a href="manipulating-data.html#cb53-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(wt, mpg, <span class="at">color =</span> cyl)) <span class="sc">+</span> <span class="fu">geom_point</span>() <span class="sc">+</span> <span class="fu">geom_smooth</span>()</span></code></pre></div>
<pre><code>## `geom_smooth()` using method = &#39;loess&#39; and formula = &#39;y ~ x&#39;</code></pre>
<pre><code>## Warning: The following aesthetics were dropped during statistical
## transformation: colour
## ℹ This can happen when ggplot fails to infer the correct
##   grouping structure in the data.
## ℹ Did you forget to specify a `group` aesthetic or to convert
##   a numerical variable into a factor?</code></pre>
<p><img src="bookdownproj_files/figure-html/mtcars4-1.png" width="672" /></p>
<p>Great. On to mutate().</p>
<div id="mutate" class="section level2 hasAnchor" number="2.1">
<h2><span class="header-section-number">2.1</span> Mutate<a href="manipulating-data.html#mutate" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>While <em>babynames</em> has five columns, or variables, to play with, some observations require creating a <em>calculated field</em> of content - essentially generating a sixth column, in the case of babynames, to show something already in the data but not made clear.</p>
<p><em>Babynames</em> does not have <em>rankings</em> of popular names for each year. Could we create that column? Sure! When we rearrange our data in descending order of prop, we have essentially created rankings based on row number- we just need to ‘mutate’ the data frame to show it.</p>
<div class="sourceCode" id="cb56"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb56-1"><a href="manipulating-data.html#cb56-1" aria-hidden="true" tabindex="-1"></a>babynames <span class="sc">%&gt;%</span> </span>
<span id="cb56-2"><a href="manipulating-data.html#cb56-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(year <span class="sc">==</span> <span class="dv">2017</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb56-3"><a href="manipulating-data.html#cb56-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(prop)) <span class="sc">%&gt;%</span> </span>
<span id="cb56-4"><a href="manipulating-data.html#cb56-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">rank =</span> <span class="fu">row_number</span>()) </span></code></pre></div>
<pre><code>## # A tibble: 32,469 × 6
##     year sex   name         n    prop  rank
##    &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt;    &lt;int&gt;   &lt;dbl&gt; &lt;int&gt;
##  1  2017 F     Emma     19738 0.0105      1
##  2  2017 F     Olivia   18632 0.00994     2
##  3  2017 M     Liam     18728 0.00954     3
##  4  2017 M     Noah     18326 0.00933     4
##  5  2017 F     Ava      15902 0.00848     5
##  6  2017 F     Isabella 15100 0.00805     6
##  7  2017 F     Sophia   14831 0.00791     7
##  8  2017 M     William  14904 0.00759     8
##  9  2017 M     James    14232 0.00725     9
## 10  2017 F     Mia      13437 0.00717    10
## # … with 32,459 more rows</code></pre>
<p>That looks good! We can now save this new, mutated dataset:</p>
<div class="sourceCode" id="cb58"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb58-1"><a href="manipulating-data.html#cb58-1" aria-hidden="true" tabindex="-1"></a>babynames <span class="sc">%&gt;%</span> </span>
<span id="cb58-2"><a href="manipulating-data.html#cb58-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(year <span class="sc">==</span> <span class="dv">2017</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb58-3"><a href="manipulating-data.html#cb58-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(prop)) <span class="sc">%&gt;%</span> </span>
<span id="cb58-4"><a href="manipulating-data.html#cb58-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">rank =</span> <span class="fu">row_number</span>()) <span class="ot">-&gt;</span> babynames_2017_ranked</span></code></pre></div>
<p>So mutate() creates a new column, and the values of that column are determined by some sort of calculation. Thus our code for mutate() declares the new column’s <em>name</em> (‘rank,’ in this case), and the calculation (‘row_number,’ in this case).</p>
<p>Let’s try a practical use of mutate() by focusing on finding the most popular names of a particular <em>generation.</em></p>
<p>According to <a href="&#39;https://www.wikipedia.cohttps://en.wikipedia.org/wiki/Silent_Generation&#39;" target="_blank">Wikipedia</a>, the ‘Silent Generation’ were born between the years of 1928 and 1944:</p>
<div class="sourceCode" id="cb59"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb59-1"><a href="manipulating-data.html#cb59-1" aria-hidden="true" tabindex="-1"></a>silent_gen <span class="ot">&lt;-</span> babynames <span class="sc">%&gt;%</span> </span>
<span id="cb59-2"><a href="manipulating-data.html#cb59-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(year <span class="sc">&gt;</span> <span class="dv">1927</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb59-3"><a href="manipulating-data.html#cb59-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(year <span class="sc">&lt;</span> <span class="dv">1945</span>) </span></code></pre></div>
<p>Ok, we have sub-setted our data to only include the years of this generation. Let’s further simplify things by only looking at female names of the Silent Generation - and also add a ‘rank’ column:</p>
<div class="sourceCode" id="cb60"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb60-1"><a href="manipulating-data.html#cb60-1" aria-hidden="true" tabindex="-1"></a>silent_gen <span class="sc">%&gt;%</span> </span>
<span id="cb60-2"><a href="manipulating-data.html#cb60-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(sex <span class="sc">==</span><span class="st">&quot;F&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb60-3"><a href="manipulating-data.html#cb60-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">rank =</span> <span class="fu">row_number</span>()) <span class="ot">-&gt;</span> silent_gen_f</span></code></pre></div>
<p>Ok, let’s see some results - what are the most popular female names of the Silent Generation? Let’s enhance the plot by adding a geom_text() object that fills in each name’s rank in its corresponding bar:</p>
<div class="sourceCode" id="cb61"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb61-1"><a href="manipulating-data.html#cb61-1" aria-hidden="true" tabindex="-1"></a>silent_gen_f <span class="sc">%&gt;%</span> </span>
<span id="cb61-2"><a href="manipulating-data.html#cb61-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>(<span class="dv">10</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb61-3"><a href="manipulating-data.html#cb61-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="fu">reorder</span>(name, prop), prop, <span class="at">fill =</span> <span class="st">&quot;red&quot;</span>)) <span class="sc">+</span> <span class="fu">geom_col</span>() <span class="sc">+</span></span>
<span id="cb61-4"><a href="manipulating-data.html#cb61-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_flip</span>() <span class="sc">+</span></span>
<span id="cb61-5"><a href="manipulating-data.html#cb61-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="fu">aes</span>(<span class="at">label =</span> rank, <span class="at">hjust =</span> <span class="dv">3</span>))</span></code></pre></div>
<p><img src="bookdownproj_files/figure-html/silent_gen3-1.png" width="672" /></p>
<p>It appears that Mary is the most popular name during this period. But wasn’t Mary popular back in 1890? Let’s look at these 10 names over time:</p>
<div class="sourceCode" id="cb62"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb62-1"><a href="manipulating-data.html#cb62-1" aria-hidden="true" tabindex="-1"></a>babynames <span class="sc">%&gt;%</span> </span>
<span id="cb62-2"><a href="manipulating-data.html#cb62-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(name <span class="sc">%in%</span> <span class="fu">c</span>(<span class="fu">head</span>(silent_gen_f<span class="sc">$</span>name, <span class="at">n =</span> <span class="dv">10</span>))) <span class="sc">%&gt;%</span> </span>
<span id="cb62-3"><a href="manipulating-data.html#cb62-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(sex <span class="sc">==</span><span class="st">&quot;F&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb62-4"><a href="manipulating-data.html#cb62-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(year, prop, <span class="at">color =</span> name)) <span class="sc">+</span> <span class="fu">geom_line</span>()</span></code></pre></div>
<p><img src="bookdownproj_files/figure-html/silent_gen4-1.png" width="672" /></p>
<p>It appears that Mary is the most popular name for a very long time, gradually waning as more and more unique names get added to the database every year (therefore decreasing its proportion). Unlike the other 9 names, it definitely doesn’t peak during this generation - so let’s remove it.</p>
<div class="sourceCode" id="cb63"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb63-1"><a href="manipulating-data.html#cb63-1" aria-hidden="true" tabindex="-1"></a>babynames <span class="sc">%&gt;%</span> </span>
<span id="cb63-2"><a href="manipulating-data.html#cb63-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(name <span class="sc">%in%</span> <span class="fu">c</span>(<span class="fu">head</span>(silent_gen_f<span class="sc">$</span>name, <span class="at">n =</span> <span class="dv">10</span>))) <span class="sc">%&gt;%</span></span>
<span id="cb63-3"><a href="manipulating-data.html#cb63-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span>name <span class="sc">%in%</span> <span class="st">&#39;Mary&#39;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb63-4"><a href="manipulating-data.html#cb63-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(sex <span class="sc">==</span><span class="st">&quot;F&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb63-5"><a href="manipulating-data.html#cb63-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(year, prop, <span class="at">color =</span> name)) <span class="sc">+</span> <span class="fu">geom_line</span>()</span></code></pre></div>
<p><img src="bookdownproj_files/figure-html/silent_gen5-1.png" width="672" /></p>
<p>That looks much better! What is that one name that is peaking like crazy right in the middle?</p>
<div class="sourceCode" id="cb64"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb64-1"><a href="manipulating-data.html#cb64-1" aria-hidden="true" tabindex="-1"></a>babynames <span class="sc">%&gt;%</span> </span>
<span id="cb64-2"><a href="manipulating-data.html#cb64-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(name <span class="sc">%in%</span> <span class="st">&quot;Shirley&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb64-3"><a href="manipulating-data.html#cb64-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(sex <span class="sc">==</span><span class="st">&quot;F&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb64-4"><a href="manipulating-data.html#cb64-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(year, prop, <span class="at">color =</span> name)) <span class="sc">+</span> <span class="fu">geom_line</span>()</span></code></pre></div>
<p><img src="bookdownproj_files/figure-html/silent_gen6-1.png" width="672" /></p>
<p>Wow! What could we possibly blame this on? The popularity of Shirley Temple? There’s no way to quantitatively measure that, even if we think it to be true.</p>
</div>
<div id="group_by-summarize" class="section level2 hasAnchor" number="2.2">
<h2><span class="header-section-number">2.2</span> Group_by , Summarize()<a href="manipulating-data.html#group_by-summarize" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Similar to creating a pivot table, the summarize() command reshapes your data by creating an <em>entirely new dataset</em> based on the parameters you specify. It is often used with the function <em>group_by()</em>. How is this useful, and how is it different from <em>mutate?</em></p>
<p>An example will help. If we look at most popular names of the Silent Generation, we see a lot of names repeated:</p>
<div class="sourceCode" id="cb65"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb65-1"><a href="manipulating-data.html#cb65-1" aria-hidden="true" tabindex="-1"></a>silent_gen_f <span class="sc">%&gt;%</span> </span>
<span id="cb65-2"><a href="manipulating-data.html#cb65-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(prop)) <span class="sc">%&gt;%</span> </span>
<span id="cb65-3"><a href="manipulating-data.html#cb65-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>(<span class="dv">10</span>)</span></code></pre></div>
<pre><code>## # A tibble: 10 × 6
##     year sex   name      n   prop  rank
##    &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt; &lt;int&gt;  &lt;dbl&gt; &lt;int&gt;
##  1  1928 F     Mary  66869 0.0559     1
##  2  1930 F     Mary  64146 0.0550 10712
##  3  1929 F     Mary  63510 0.0549  5437
##  4  1931 F     Mary  60296 0.0546 15960
##  5  1932 F     Mary  59872 0.0541 20937
##  6  1933 F     Mary  55507 0.0531 26037
##  7  1934 F     Mary  56924 0.0526 30895
##  8  1935 F     Mary  55065 0.0507 35868
##  9  1937 F     Mary  55642 0.0505 45616
## 10  1936 F     Mary  54373 0.0505 40760</code></pre>
<p>If we want to count the <em>total number of instances</em> of each name over time, we’d have to use group_by() and summarise(), as well as <em>n_distinct()</em>, which counts the <em>number of unique instances</em> of a variable.</p>
<p>In other words, if we want to see <em>how many instances of each name there were per year</em>, and plot it, we need to use <em>summarize():</em></p>
<div class="sourceCode" id="cb67"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb67-1"><a href="manipulating-data.html#cb67-1" aria-hidden="true" tabindex="-1"></a>babynames <span class="sc">%&gt;%</span> </span>
<span id="cb67-2"><a href="manipulating-data.html#cb67-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(year) <span class="sc">%&gt;%</span> </span>
<span id="cb67-3"><a href="manipulating-data.html#cb67-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">name_count =</span> <span class="fu">n_distinct</span>(name)) <span class="ot">-&gt;</span> distinct</span>
<span id="cb67-4"><a href="manipulating-data.html#cb67-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb67-5"><a href="manipulating-data.html#cb67-5" aria-hidden="true" tabindex="-1"></a><span class="fu">View</span>(distinct)</span>
<span id="cb67-6"><a href="manipulating-data.html#cb67-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb67-7"><a href="manipulating-data.html#cb67-7" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(distinct, <span class="fu">aes</span>(year, name_count)) <span class="sc">+</span> <span class="fu">geom_line</span>() </span></code></pre></div>
<p><img src="bookdownproj_files/figure-html/summ1-1.png" width="672" /></p>
<p>Note that, unlike mutate(), summarize() removes <em>all</em> of our dataframe’s columns except the ones we specify we want to look at in both summarize() and group_by(). So if we want to ‘keep’ a variable in order to later visualize it, we have to add it to the group_by() function:</p>
<div class="sourceCode" id="cb68"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb68-1"><a href="manipulating-data.html#cb68-1" aria-hidden="true" tabindex="-1"></a>babynames <span class="sc">%&gt;%</span> </span>
<span id="cb68-2"><a href="manipulating-data.html#cb68-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(year, sex) <span class="sc">%&gt;%</span> </span>
<span id="cb68-3"><a href="manipulating-data.html#cb68-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">name_count =</span> <span class="fu">n_distinct</span>(name)) <span class="ot">-&gt;</span> distinct</span></code></pre></div>
<pre><code>## `summarise()` has grouped output by &#39;year&#39;. You can override
## using the `.groups` argument.</code></pre>
<div class="sourceCode" id="cb70"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb70-1"><a href="manipulating-data.html#cb70-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(distinct, <span class="fu">aes</span>(year, name_count)) <span class="sc">+</span> <span class="fu">geom_line</span>() <span class="sc">+</span></span>
<span id="cb70-2"><a href="manipulating-data.html#cb70-2" aria-hidden="true" tabindex="-1"></a><span class="fu">facet_wrap</span>(<span class="sc">~</span>sex)</span></code></pre></div>
<p><img src="bookdownproj_files/figure-html/summ2-1.png" width="672" /></p>
<p>Summarize() is the most challenging of the basic <em>dplyr</em> functions, so don’t be discouraged if you struggle with it! Again, if already familiar with the concept of a <em>Pivot Table</em>, summarize() is basically the same, but in programmatic form: select the columns you wish to compare, strip away the rest of the data, and give me a simplified dataframe that can be visualized.</p>
<p>When do you know to use summarize() instead of mutate()? Well, think of mutate as making a <em>calculated field</em>, adding a column to your dataframe - and summarize() as making a pivot table, stripping away most of your data to look at only a handful of columns in a new way. In the case of <em>babynames</em>, it’s clearly an appropriate time to use summarize() when you see the same name repeated over and over again in your results. We will revisit both techniques.</p>
<hr />
<p>Playing with the <em>babynames</em> dataset allows us to learn basic data manipulation and visualization, while avoiding other important topics, such as loading data files into R or doing basic statistical calculations - which we will get into shortly. In the meantime, play around with <em>babynames</em> and try to answer specific questions, such as:</p>
<ul>
<li>
What generation saw the most births in the 20th Century?
</li>
<li>
How have ‘virtue names,’ like ‘Charity,’ ‘Temperance,’ or ‘Faith’ fared in babynames: are they more or less popular now than in the past?
</li>
<li>
What are the <em>total number of names</em> per year, and is this total increasing or decreasing?
</li>
</ul>
</div>
<div id="working-with-strings" class="section level2 hasAnchor" number="2.3">
<h2><span class="header-section-number">2.3</span> Working with Strings<a href="manipulating-data.html#working-with-strings" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div class="sourceCode" id="cb71"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb71-1"><a href="manipulating-data.html#cb71-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(babynames)</span>
<span id="cb71-2"><a href="manipulating-data.html#cb71-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb71-3"><a href="manipulating-data.html#cb71-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidytext)</span>
<span id="cb71-4"><a href="manipulating-data.html#cb71-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(textdata)</span></code></pre></div>
<p>Stringr is a package in the <em>tidyverse</em> that deals with, well, strings. What are strings? Anything in your data frame that is text- or character-based. So, in the case of <em>babynames</em>, that’d be <em>Name</em> and <em>Sex -</em> Year, Prop and N are not strings.</p>
<p>Stringr allows for string manipulation across your entire dataset. If, for instance, we had a column of character data that repeatedly mis-spelled a name: <em>Bryan</em> instead of <em>Brian</em>, say - stringr could change every instance of <em>Bryan</em> into <em>Brian</em> in one line of code.</p>
<p>Let’s start playing around with stringr by creating a <em>variable</em> that is equal to a string:</p>
<div class="sourceCode" id="cb72"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb72-1"><a href="manipulating-data.html#cb72-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(stringr)</span>
<span id="cb72-2"><a href="manipulating-data.html#cb72-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb72-3"><a href="manipulating-data.html#cb72-3" aria-hidden="true" tabindex="-1"></a>sentence <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;hello&quot;</span>, <span class="st">&quot;this is a long sentence&quot;</span>, <span class="cn">NA</span>)</span></code></pre></div>
<p>Here are some functions from the stringr package that we can use to manipulate this sentence.</p>
<ul>
<li>
How many characters are there in the string?
</li>
<div class="sourceCode" id="cb73"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb73-1"><a href="manipulating-data.html#cb73-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_length</span>(sentence)</span></code></pre></div>
<pre><code>## [1]  5 23 NA</code></pre>
<li>
Let’s replace every instance of ‘l’ with ‘x’
</li>
<div class="sourceCode" id="cb75"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb75-1"><a href="manipulating-data.html#cb75-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_replace</span>(sentence, <span class="st">&quot;l&quot;</span>, <span class="st">&quot;X&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;heXlo&quot;                   &quot;this is a Xong sentence&quot;
## [3] NA</code></pre>
<p>Okay, now let’s create a new string that is a <em>list</em> of character strings:</p>
<div class="sourceCode" id="cb77"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb77-1"><a href="manipulating-data.html#cb77-1" aria-hidden="true" tabindex="-1"></a>list <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;Apple&quot;</span>, <span class="st">&quot;Banana&quot;</span>, <span class="st">&quot;Pear&quot;</span>)</span></code></pre></div>
<p>Let’s use str_sub to ‘pull out’ the first character of the string:</p>
<div class="sourceCode" id="cb78"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb78-1"><a href="manipulating-data.html#cb78-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_sub</span>(list, <span class="dv">1</span>,<span class="dv">1</span>)</span></code></pre></div>
<pre><code>## [1] &quot;A&quot; &quot;B&quot; &quot;P&quot;</code></pre>
<p>What just happened? We told R to only grab the first character. Can we grab the first three characters?</p>
<div class="sourceCode" id="cb80"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb80-1"><a href="manipulating-data.html#cb80-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_sub</span>(list, <span class="dv">1</span>,<span class="dv">3</span>)</span></code></pre></div>
<pre><code>## [1] &quot;App&quot; &quot;Ban&quot; &quot;Pea&quot;</code></pre>
<p>Let’s adjust the string’s content so each fruit is written entirely in lower case:</p>
<div class="sourceCode" id="cb82"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb82-1"><a href="manipulating-data.html#cb82-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_to_lower</span>(list)</span></code></pre></div>
<pre><code>## [1] &quot;apple&quot;  &quot;banana&quot; &quot;pear&quot;</code></pre>
<p>We can also use stringr to detect specific words or phrases:</p>
<div class="sourceCode" id="cb84"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb84-1"><a href="manipulating-data.html#cb84-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_detect</span>(list, <span class="st">&quot;Pear&quot;</span>)</span></code></pre></div>
<pre><code>## [1] FALSE FALSE  TRUE</code></pre>
<p>R returns the position of “Pear” in the list.</p>
<div id="practical-applications-of-stringr" class="section level3 hasAnchor" number="2.3.1">
<h3><span class="header-section-number">2.3.1</span> Practical Applications of Stringr<a href="manipulating-data.html#practical-applications-of-stringr" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Let’s apply more Stringr concepts to a body of text. Where could we find text? How would we get text into R?</p>
<p>One way would be a ‘web scrape’ - programmatically grabbing all the relevant text off of a page, or a series of pages - think Amazon product reviews.</p>
<p>Another would be to import a body of text, like a .txt file, into R, and then break it up into individual words - more on this in the next chapter.</p>
<p>A third way would be to use data included in an R package. More commonly, packages give you <em>access</em> to online datasets too large to download (Spotify, The New York Times, etc.). This technique, of selectively downloading relevant data from a much larger, online database, is the basis for the concept of an ‘API.’ [<em>Application Programming Interface</em>, if you’re wondering.] Many websites also use APIs, with downloadable files for analysis.</p>
<p>So as to avoid any complication, let’s hold off on accessing an API until we cover Twitter, and continue to use the <em>babynames</em> dataset for now; then we can move on to analyzing lyrics, political speeches, and great works of literature.</p>
<p>A snippet of <em>Base R</em> here, rather than the <em>tidyverse</em>: if we want to specify a <em>column</em> in our dataset, we write the name of the dataset or variable, then the dollar sign, then the name of the column:</p>
<div class="sourceCode" id="cb86"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb86-1"><a href="manipulating-data.html#cb86-1" aria-hidden="true" tabindex="-1"></a>babynames<span class="sc">$</span>name</span></code></pre></div>
<pre class="scroll-300"><code>##    [1] &quot;Mary&quot;       &quot;Anna&quot;       &quot;Emma&quot;       &quot;Elizabeth&quot; 
##    [5] &quot;Minnie&quot;     &quot;Margaret&quot;   &quot;Ida&quot;        &quot;Alice&quot;     
##    [9] &quot;Bertha&quot;     &quot;Sarah&quot;      &quot;Annie&quot;      &quot;Clara&quot;     
##   [13] &quot;Ella&quot;       &quot;Florence&quot;   &quot;Cora&quot;       &quot;Martha&quot;    
##   [17] &quot;Laura&quot;      &quot;Nellie&quot;     &quot;Grace&quot;      &quot;Carrie&quot;    
##   [21] &quot;Maude&quot;      &quot;Mabel&quot;      &quot;Bessie&quot;     &quot;Jennie&quot;    
##   [25] &quot;Gertrude&quot;   &quot;Julia&quot;      &quot;Hattie&quot;     &quot;Edith&quot;     
##   [29] &quot;Mattie&quot;     &quot;Rose&quot;       &quot;Catherine&quot;  &quot;Lillian&quot;   
##   [33] &quot;Ada&quot;        &quot;Lillie&quot;     &quot;Helen&quot;      &quot;Jessie&quot;    
##   [37] &quot;Louise&quot;     &quot;Ethel&quot;      &quot;Lula&quot;       &quot;Myrtle&quot;    
##   [41] &quot;Eva&quot;        &quot;Frances&quot;    &quot;Lena&quot;       &quot;Lucy&quot;      
##   [45] &quot;Edna&quot;       &quot;Maggie&quot;     &quot;Pearl&quot;      &quot;Daisy&quot;     
##   [49] &quot;Fannie&quot;     &quot;Josephine&quot;  &quot;Dora&quot;       &quot;Rosa&quot;      
##   [53] &quot;Katherine&quot;  &quot;Agnes&quot;      &quot;Marie&quot;      &quot;Nora&quot;      
##   [57] &quot;May&quot;        &quot;Mamie&quot;      &quot;Blanche&quot;    &quot;Stella&quot;    
##   [61] &quot;Ellen&quot;      &quot;Nancy&quot;      &quot;Effie&quot;      &quot;Sallie&quot;    
##   [65] &quot;Nettie&quot;     &quot;Della&quot;      &quot;Lizzie&quot;     &quot;Flora&quot;     
##   [69] &quot;Susie&quot;      &quot;Maud&quot;       &quot;Mae&quot;        &quot;Etta&quot;      
##   [73] &quot;Harriet&quot;    &quot;Sadie&quot;      &quot;Caroline&quot;   &quot;Katie&quot;     
##   [77] &quot;Lydia&quot;      &quot;Elsie&quot;      &quot;Kate&quot;       &quot;Susan&quot;     
##   [81] &quot;Mollie&quot;     &quot;Alma&quot;       &quot;Addie&quot;      &quot;Georgia&quot;   
##   [85] &quot;Eliza&quot;      &quot;Lulu&quot;       &quot;Nannie&quot;     &quot;Lottie&quot;    
##   [89] &quot;Amanda&quot;     &quot;Belle&quot;      &quot;Charlotte&quot;  &quot;Rebecca&quot;   
##   [93] &quot;Ruth&quot;       &quot;Viola&quot;      &quot;Olive&quot;      &quot;Amelia&quot;    
##   [97] &quot;Hannah&quot;     &quot;Jane&quot;       &quot;Virginia&quot;   &quot;Emily&quot;     
##  [101] &quot;Matilda&quot;    &quot;Irene&quot;      &quot;Kathryn&quot;    &quot;Esther&quot;    
##  [105] &quot;Willie&quot;     &quot;Henrietta&quot;  &quot;Ollie&quot;      &quot;Amy&quot;       
##  [109] &quot;Rachel&quot;     &quot;Sara&quot;       &quot;Estella&quot;    &quot;Theresa&quot;   
##  [113] &quot;Augusta&quot;    &quot;Ora&quot;        &quot;Pauline&quot;    &quot;Josie&quot;     
##  [117] &quot;Lola&quot;       &quot;Sophia&quot;     &quot;Leona&quot;      &quot;Anne&quot;      
##  [121] &quot;Mildred&quot;    &quot;Ann&quot;        &quot;Beulah&quot;     &quot;Callie&quot;    
##  [125] &quot;Lou&quot;        &quot;Delia&quot;      &quot;Eleanor&quot;    &quot;Barbara&quot;   
##  [129] &quot;Iva&quot;        &quot;Louisa&quot;     &quot;Maria&quot;      &quot;Mayme&quot;     
##  [133] &quot;Evelyn&quot;     &quot;Estelle&quot;    &quot;Nina&quot;       &quot;Betty&quot;     
##  [137] &quot;Marion&quot;     &quot;Bettie&quot;     &quot;Dorothy&quot;    &quot;Luella&quot;    
##  [141] &quot;Inez&quot;       &quot;Lela&quot;       &quot;Rosie&quot;      &quot;Allie&quot;     
##  [145] &quot;Millie&quot;     &quot;Janie&quot;      &quot;Cornelia&quot;   &quot;Victoria&quot;  
##  [149] &quot;Ruby&quot;       &quot;Winifred&quot;   &quot;Alta&quot;       &quot;Celia&quot;     
##  [153] &quot;Christine&quot;  &quot;Beatrice&quot;   &quot;Birdie&quot;     &quot;Harriett&quot;  
##  [157] &quot;Mable&quot;      &quot;Myra&quot;       &quot;Sophie&quot;     &quot;Tillie&quot;    
##  [161] &quot;Isabel&quot;     &quot;Sylvia&quot;     &quot;Carolyn&quot;    &quot;Isabelle&quot;  
##  [165] &quot;Leila&quot;      &quot;Sally&quot;      &quot;Ina&quot;        &quot;Essie&quot;     
##  [169] &quot;Bertie&quot;     &quot;Nell&quot;       &quot;Alberta&quot;    &quot;Katharine&quot; 
##  [173] &quot;Lora&quot;       &quot;Rena&quot;       &quot;Mina&quot;       &quot;Rhoda&quot;     
##  [177] &quot;Mathilda&quot;   &quot;Abbie&quot;      &quot;Eula&quot;       &quot;Dollie&quot;    
##  [181] &quot;Hettie&quot;     &quot;Eunice&quot;     &quot;Fanny&quot;      &quot;Ola&quot;       
##  [185] &quot;Lenora&quot;     &quot;Adelaide&quot;   &quot;Christina&quot;  &quot;Lelia&quot;     
##  [189] &quot;Nelle&quot;      &quot;Sue&quot;        &quot;Johanna&quot;    &quot;Lilly&quot;     
##  [193] &quot;Lucinda&quot;    &quot;Minerva&quot;    &quot;Lettie&quot;     &quot;Roxie&quot;     
##  [197] &quot;Cynthia&quot;    &quot;Helena&quot;     &quot;Hilda&quot;      &quot;Hulda&quot;     
##  [201] &quot;Bernice&quot;    &quot;Genevieve&quot;  &quot;Jean&quot;       &quot;Cordelia&quot;  
##  [205] &quot;Marian&quot;     &quot;Francis&quot;    &quot;Jeanette&quot;   &quot;Adeline&quot;   
##  [209] &quot;Gussie&quot;     &quot;Leah&quot;       &quot;Lois&quot;       &quot;Lura&quot;      
##  [213] &quot;Mittie&quot;     &quot;Hallie&quot;     &quot;Isabella&quot;   &quot;Olga&quot;      
##  [217] &quot;Phoebe&quot;     &quot;Teresa&quot;     &quot;Hester&quot;     &quot;Lida&quot;      
##  [221] &quot;Lina&quot;       &quot;Winnie&quot;     &quot;Claudia&quot;    &quot;Marguerite&quot;
##  [225] &quot;Vera&quot;       &quot;Cecelia&quot;    &quot;Bess&quot;       &quot;Emilie&quot;    
##  [229] &quot;John&quot;       &quot;Rosetta&quot;    &quot;Verna&quot;      &quot;Myrtie&quot;    
##  [233] &quot;Cecilia&quot;    &quot;Elva&quot;       &quot;Olivia&quot;     &quot;Ophelia&quot;   
##  [237] &quot;Georgie&quot;    &quot;Elnora&quot;     &quot;Violet&quot;     &quot;Adele&quot;     
##  [241] &quot;Lily&quot;       &quot;Linnie&quot;     &quot;Loretta&quot;    &quot;Madge&quot;     
##  [245] &quot;Polly&quot;      &quot;Virgie&quot;     &quot;Eugenia&quot;    &quot;Lucile&quot;    
##  [249] &quot;Lucille&quot;    &quot;Mabelle&quot;    &quot;Rosalie&quot;    &quot;Kittie&quot;    
##  [253] &quot;Meta&quot;       &quot;Angie&quot;      &quot;Dessie&quot;     &quot;Georgiana&quot; 
##  [257] &quot;Lila&quot;       &quot;Regina&quot;     &quot;Selma&quot;      &quot;Wilhelmina&quot;
##  [261] &quot;Bridget&quot;    &quot;Lilla&quot;      &quot;Malinda&quot;    &quot;Vina&quot;      
##  [265] &quot;Freda&quot;      &quot;Gertie&quot;     &quot;Jeannette&quot;  &quot;Louella&quot;   
##  [269] &quot;Mandy&quot;      &quot;Roberta&quot;    &quot;Cassie&quot;     &quot;Corinne&quot;   
##  [273] &quot;Ivy&quot;        &quot;Melissa&quot;    &quot;Lyda&quot;       &quot;Naomi&quot;     
##  [277] &quot;Norma&quot;      &quot;Bell&quot;       &quot;Margie&quot;     &quot;Nona&quot;      
##  [281] &quot;Zella&quot;      &quot;Dovie&quot;      &quot;Elvira&quot;     &quot;Erma&quot;      
##  [285] &quot;Irma&quot;       &quot;Leota&quot;      &quot;William&quot;    &quot;Artie&quot;     
##  [289] &quot;Blanch&quot;     &quot;Charity&quot;    &quot;Lorena&quot;     &quot;Lucretia&quot;  
##  [293] &quot;Orpha&quot;      &quot;Alvina&quot;     &quot;Annette&quot;    &quot;Catharine&quot; 
##  [297] &quot;Elma&quot;       &quot;Geneva&quot;     &quot;Janet&quot;      &quot;Lee&quot;       
##  [301] &quot;Leora&quot;      &quot;Lona&quot;       &quot;Miriam&quot;     &quot;Zora&quot;      
##  [305] &quot;Linda&quot;      &quot;Octavia&quot;    &quot;Sudie&quot;      &quot;Zula&quot;      
##  [309] &quot;Adella&quot;     &quot;Alpha&quot;      &quot;Frieda&quot;     &quot;George&quot;    
##  [313] &quot;Joanna&quot;     &quot;Leonora&quot;    &quot;Priscilla&quot;  &quot;Tennie&quot;    
##  [317] &quot;Angeline&quot;   &quot;Docia&quot;      &quot;Ettie&quot;      &quot;Flossie&quot;   
##  [321] &quot;Hanna&quot;      &quot;Letha&quot;      &quot;Minta&quot;      &quot;Retta&quot;     
##  [325] &quot;Rosella&quot;    &quot;Adah&quot;       &quot;Berta&quot;      &quot;Elisabeth&quot; 
##  [329] &quot;Elise&quot;      &quot;Goldie&quot;     &quot;Leola&quot;      &quot;Margret&quot;   
##  [333] &quot;Adaline&quot;    &quot;Floy&quot;       &quot;Idella&quot;     &quot;Juanita&quot;   
##  [337] &quot;Lenna&quot;      &quot;Lucie&quot;      &quot;Missouri&quot;   &quot;Nola&quot;      
##  [341] &quot;Zoe&quot;        &quot;Eda&quot;        &quot;Isabell&quot;    &quot;James&quot;     
##  [345] &quot;Julie&quot;      &quot;Letitia&quot;    &quot;Madeline&quot;   &quot;Malissa&quot;   
##  [349] &quot;Mariah&quot;     &quot;Pattie&quot;     &quot;Vivian&quot;     &quot;Almeda&quot;    
##  [353] &quot;Aurelia&quot;    &quot;Claire&quot;     &quot;Dolly&quot;      &quot;Hazel&quot;     
##  [357] &quot;Jannie&quot;     &quot;Kathleen&quot;   &quot;Kathrine&quot;   &quot;Lavinia&quot;   
##  [361] &quot;Marietta&quot;   &quot;Melvina&quot;    &quot;Ona&quot;        &quot;Pinkie&quot;    
##  [365] &quot;Samantha&quot;   &quot;Susanna&quot;    &quot;Chloe&quot;      &quot;Donnie&quot;    
##  [369] &quot;Elsa&quot;       &quot;Gladys&quot;     &quot;Matie&quot;      &quot;Pearle&quot;    
##  [373] &quot;Vesta&quot;      &quot;Vinnie&quot;     &quot;Antoinette&quot; &quot;Clementine&quot;
##  [377] &quot;Edythe&quot;     &quot;Harriette&quot;  &quot;Libbie&quot;     &quot;Lilian&quot;    
##  [381] &quot;Lue&quot;        &quot;Lutie&quot;      &quot;Magdalena&quot;  &quot;Meda&quot;      
##  [385] &quot;Rita&quot;       &quot;Tena&quot;       &quot;Zelma&quot;      &quot;Adelia&quot;    
##  [389] &quot;Annetta&quot;    &quot;Antonia&quot;    &quot;Dona&quot;       &quot;Elizebeth&quot; 
##  [393] &quot;Georgianna&quot; &quot;Gracie&quot;     &quot;Iona&quot;       &quot;Lessie&quot;    
##  [397] &quot;Leta&quot;       &quot;Liza&quot;       &quot;Mertie&quot;     &quot;Molly&quot;     
##  [401] &quot;Neva&quot;       &quot;Oma&quot;        &quot;Alida&quot;      &quot;Alva&quot;      
##  [405] &quot;Cecile&quot;     &quot;Cleo&quot;       &quot;Donna&quot;      &quot;Ellie&quot;     
##  [409] &quot;Ernestine&quot;  &quot;Evie&quot;       &quot;Frankie&quot;    &quot;Helene&quot;    
##  [413] &quot;Minna&quot;      &quot;Myrta&quot;      &quot;Prudence&quot;   &quot;Queen&quot;     
##  [417] &quot;Rilla&quot;      &quot;Savannah&quot;   &quot;Tessie&quot;     &quot;Tina&quot;      
##  [421] &quot;Agatha&quot;     &quot;America&quot;    &quot;Anita&quot;      &quot;Arminta&quot;   
##  [425] &quot;Dorothea&quot;   &quot;Ira&quot;        &quot;Luvenia&quot;    &quot;Marjorie&quot;  
##  [429] &quot;Maybelle&quot;   &quot;Mellie&quot;     &quot;Nan&quot;        &quot;Pearlie&quot;   
##  [433] &quot;Sidney&quot;     &quot;Velma&quot;      &quot;Clare&quot;      &quot;Constance&quot; 
##  [437] &quot;Dixie&quot;      &quot;Ila&quot;        &quot;Iola&quot;       &quot;Jimmie&quot;    
##  [441] &quot;Louvenia&quot;   &quot;Lucia&quot;      &quot;Ludie&quot;      &quot;Luna&quot;      
##  [445] &quot;Metta&quot;      &quot;Patsy&quot;      &quot;Phebe&quot;      &quot;Sophronia&quot; 
##  [449] &quot;Adda&quot;       &quot;Avis&quot;       &quot;Betsy&quot;      &quot;Bonnie&quot;    
##  [453] &quot;Cecil&quot;      &quot;Cordie&quot;     &quot;Emmaline&quot;   &quot;Ethelyn&quot;   
##  [457] &quot;Hortense&quot;   &quot;June&quot;       &quot;Louie&quot;      &quot;Lovie&quot;     
##  [461] &quot;Marcella&quot;   &quot;Melinda&quot;    &quot;Mona&quot;       &quot;Odessa&quot;    
##  [465] &quot;Veronica&quot;   &quot;Aimee&quot;      &quot;Annabel&quot;    &quot;Ava&quot;       
##  [469] &quot;Bella&quot;      &quot;Carolina&quot;   &quot;Cathrine&quot;   &quot;Christena&quot; 
##  [473] &quot;Clyde&quot;      &quot;Dena&quot;       &quot;Dolores&quot;    &quot;Eleanore&quot;  
##  [477] &quot;Elmira&quot;     &quot;Fay&quot;        &quot;Frank&quot;      &quot;Jenny&quot;     
##  [481] &quot;Kizzie&quot;     &quot;Lonnie&quot;     &quot;Loula&quot;      &quot;Magdalene&quot; 
##  [485] &quot;Mettie&quot;     &quot;Mintie&quot;     &quot;Peggy&quot;      &quot;Reba&quot;      
##  [489] &quot;Serena&quot;     &quot;Vida&quot;       &quot;Zada&quot;       &quot;Abigail&quot;   
##  [493] &quot;Celestine&quot;  &quot;Celina&quot;     &quot;Claudie&quot;    &quot;Clemmie&quot;   
##  [497] &quot;Connie&quot;     &quot;Daisie&quot;     &quot;Deborah&quot;    &quot;Dessa&quot;     
##  [501] &quot;Easter&quot;     &quot;Eddie&quot;      &quot;Emelia&quot;     &quot;Emmie&quot;     
##  [505] &quot;Imogene&quot;    &quot;India&quot;      &quot;Jeanne&quot;     &quot;Joan&quot;      
##  [509] &quot;Lenore&quot;     &quot;Liddie&quot;     &quot;Lotta&quot;      &quot;Mame&quot;      
##  [513] &quot;Nevada&quot;     &quot;Rachael&quot;    &quot;Robert&quot;     &quot;Sina&quot;      
##  [517] &quot;Willa&quot;      &quot;Aline&quot;      &quot;Beryl&quot;      &quot;Charles&quot;   
##  [521] &quot;Daisey&quot;     &quot;Dorcas&quot;     &quot;Edmonia&quot;    &quot;Effa&quot;      
##  [525] &quot;Eldora&quot;     &quot;Eloise&quot;     &quot;Emmer&quot;      &quot;Era&quot;       
##  [529] &quot;Gena&quot;       &quot;Henry&quot;      &quot;Iris&quot;       &quot;Izora&quot;     
##  [533] &quot;Lennie&quot;     &quot;Lissie&quot;     &quot;Mallie&quot;     &quot;Malvina&quot;   
##  [537] &quot;Mathilde&quot;   &quot;Mazie&quot;      &quot;Queenie&quot;    &quot;Rosina&quot;    
##  [541] &quot;Salome&quot;     &quot;Theodora&quot;   &quot;Therese&quot;    &quot;Vena&quot;      
##  [545] &quot;Wanda&quot;      &quot;Wilda&quot;      &quot;Altha&quot;      &quot;Anastasia&quot; 
##  [549] &quot;Besse&quot;      &quot;Bird&quot;       &quot;Birtie&quot;     &quot;Clarissa&quot;  
##  [553] &quot;Claude&quot;     &quot;Delilah&quot;    &quot;Diana&quot;      &quot;Emelie&quot;    
##  [557] &quot;Erna&quot;       &quot;Fern&quot;       &quot;Florida&quot;    &quot;Frona&quot;     
##  [561] &quot;Hilma&quot;      &quot;Joseph&quot;     &quot;Juliet&quot;     &quot;Leonie&quot;    
##  [565] &quot;Lugenia&quot;    &quot;Mammie&quot;     &quot;Manda&quot;      &quot;Manerva&quot;   
##  [569] &quot;Manie&quot;      &quot;Nella&quot;      &quot;Paulina&quot;    &quot;Philomena&quot; 
##  [573] &quot;Rae&quot;        &quot;Selina&quot;     &quot;Sena&quot;       &quot;Theodosia&quot; 
##  [577] &quot;Tommie&quot;     &quot;Una&quot;        &quot;Vernie&quot;     &quot;Adela&quot;     
##  [581] &quot;Althea&quot;     &quot;Amalia&quot;     &quot;Amber&quot;      &quot;Angelina&quot;  
##  [585] &quot;Annabelle&quot;  &quot;Anner&quot;      &quot;Arie&quot;       &quot;Clarice&quot;   
##  [589] &quot;Corda&quot;      &quot;Corrie&quot;     &quot;Dell&quot;       &quot;Dellar&quot;    
##  [593] &quot;Donie&quot;      &quot;Doris&quot;      &quot;Elda&quot;       &quot;Elinor&quot;    
##  [597] &quot;Emeline&quot;    &quot;Emilia&quot;     &quot;Esta&quot;       &quot;Estell&quot;    
##  [601] &quot;Etha&quot;       &quot;Fred&quot;       &quot;Hope&quot;       &quot;Indiana&quot;   
##  [605] &quot;Ione&quot;       &quot;Jettie&quot;     &quot;Johnnie&quot;    &quot;Josiephine&quot;
##  [609] &quot;Kitty&quot;      &quot;Lavina&quot;     &quot;Leda&quot;       &quot;Letta&quot;     
##  [613] &quot;Mahala&quot;     &quot;Marcia&quot;     &quot;Margarette&quot; &quot;Maudie&quot;    
##  [617] &quot;Maye&quot;       &quot;Norah&quot;      &quot;Oda&quot;        &quot;Patty&quot;     
##  [621] &quot;Paula&quot;      &quot;Permelia&quot;   &quot;Rosalia&quot;    &quot;Roxanna&quot;   
##  [625] &quot;Sula&quot;       &quot;Vada&quot;       &quot;Winnifred&quot;  &quot;Adline&quot;    
##  [629] &quot;Almira&quot;     &quot;Alvena&quot;     &quot;Arizona&quot;    &quot;Becky&quot;     
##  [633] &quot;Bennie&quot;     &quot;Bernadette&quot; &quot;Camille&quot;    &quot;Cordia&quot;    
##  [637] &quot;Corine&quot;     &quot;Dicie&quot;      &quot;Dove&quot;       &quot;Drusilla&quot;  
##  [641] &quot;Elena&quot;      &quot;Elenora&quot;    &quot;Elmina&quot;     &quot;Ethyl&quot;     
##  [645] &quot;Evalyn&quot;     &quot;Evelina&quot;    &quot;Faye&quot;       &quot;Huldah&quot;    
##  [649] &quot;Idell&quot;      &quot;Inga&quot;       &quot;Irena&quot;      &quot;Jewell&quot;    
##  [653] &quot;Kattie&quot;     &quot;Lavenia&quot;    &quot;Leslie&quot;     &quot;Lovina&quot;    
##  [657] &quot;Lulie&quot;      &quot;Magnolia&quot;   &quot;Margeret&quot;   &quot;Margery&quot;   
##  [661] &quot;Media&quot;      &quot;Millicent&quot;  &quot;Nena&quot;       &quot;Ocie&quot;      
##  [665] &quot;Orilla&quot;     &quot;Osie&quot;       &quot;Pansy&quot;      &quot;Ray&quot;       
##  [669] &quot;Rosia&quot;      &quot;Rowena&quot;     &quot;Shirley&quot;    &quot;Tabitha&quot;   
##  [673] &quot;Thomas&quot;     &quot;Verdie&quot;     &quot;Walter&quot;     &quot;Zetta&quot;     
##  [677] &quot;Zoa&quot;        &quot;Zona&quot;       &quot;Albertina&quot;  &quot;Albina&quot;    
##  [681] &quot;Alyce&quot;      &quot;Amie&quot;       &quot;Angela&quot;     &quot;Annis&quot;     
##  [685] &quot;Carol&quot;      &quot;Carra&quot;      &quot;Clarence&quot;   &quot;Clarinda&quot;  
##  [689] &quot;Delphia&quot;    &quot;Dillie&quot;     &quot;Doshie&quot;     &quot;Drucilla&quot;  
##  [693] &quot;Etna&quot;       &quot;Eugenie&quot;    &quot;Eulalia&quot;    &quot;Eve&quot;       
##  [697] &quot;Felicia&quot;    &quot;Florance&quot;   &quot;Fronie&quot;     &quot;Geraldine&quot; 
##  [701] &quot;Gina&quot;       &quot;Glenna&quot;     &quot;Grayce&quot;     &quot;Hedwig&quot;    
##  [705] &quot;Jessica&quot;    &quot;Jossie&quot;     &quot;Katheryn&quot;   &quot;Katy&quot;      
##  [709] &quot;Lea&quot;        &quot;Leanna&quot;     &quot;Leitha&quot;     &quot;Leone&quot;     
##  [713] &quot;Lidie&quot;      &quot;Loma&quot;       &quot;Lular&quot;      &quot;Magdalen&quot;  
##  [717] &quot;Maymie&quot;     &quot;Minervia&quot;   &quot;Muriel&quot;     &quot;Neppie&quot;    
##  [721] &quot;Olie&quot;       &quot;Onie&quot;       &quot;Osa&quot;        &quot;Otelia&quot;    
##  [725] &quot;Paralee&quot;    &quot;Patience&quot;   &quot;Rella&quot;      &quot;Rillie&quot;    
##  [729] &quot;Rosanna&quot;    &quot;Theo&quot;       &quot;Tilda&quot;      &quot;Tishie&quot;    
##  [733] &quot;Tressa&quot;     &quot;Viva&quot;       &quot;Yetta&quot;      &quot;Zena&quot;      
##  [737] &quot;Zola&quot;       &quot;Abby&quot;       &quot;Aileen&quot;     &quot;Alba&quot;      
##  [741] &quot;Alda&quot;       &quot;Alla&quot;       &quot;Alverta&quot;    &quot;Ara&quot;       
##  [745] &quot;Ardelia&quot;    &quot;Ardella&quot;    &quot;Arrie&quot;      &quot;Arvilla&quot;   
##  [749] &quot;Augustine&quot;  &quot;Aurora&quot;     &quot;Bama&quot;       &quot;Bena&quot;      
##  [753] &quot;Byrd&quot;       &quot;Calla&quot;      &quot;Camilla&quot;    &quot;Carey&quot;     
##  [757] &quot;Carlotta&quot;   &quot;Celestia&quot;   &quot;Cherry&quot;     &quot;Cinda&quot;     
##  [761] &quot;Classie&quot;    &quot;Claudine&quot;   &quot;Clemie&quot;     &quot;Clifford&quot;  
##  [765] &quot;Clyda&quot;      &quot;Creola&quot;     &quot;Debbie&quot;     &quot;Dee&quot;       
##  [769] &quot;Dinah&quot;      &quot;Doshia&quot;     &quot;Ednah&quot;      &quot;Edyth&quot;     
##  [773] &quot;Eleanora&quot;   &quot;Electa&quot;     &quot;Eola&quot;       &quot;Erie&quot;      
##  [777] &quot;Eudora&quot;     &quot;Euphemia&quot;   &quot;Evalena&quot;    &quot;Evaline&quot;   
##  [781] &quot;Faith&quot;      &quot;Fidelia&quot;    &quot;Freddie&quot;    &quot;Golda&quot;     
##  [785] &quot;Harry&quot;      &quot;Helma&quot;      &quot;Hermine&quot;    &quot;Hessie&quot;    
##  [789] &quot;Ivah&quot;       &quot;Janette&quot;    &quot;Jennette&quot;   &quot;Joella&quot;    
##  [793] &quot;Kathryne&quot;   &quot;Lacy&quot;       &quot;Lanie&quot;      &quot;Lauretta&quot;  
##  [797] &quot;Leana&quot;      &quot;Leatha&quot;     &quot;Leo&quot;        &quot;Liller&quot;    
##  [801] &quot;Lillis&quot;     &quot;Louetta&quot;    &quot;Madie&quot;      &quot;Mai&quot;       
##  [805] &quot;Martina&quot;    &quot;Maryann&quot;    &quot;Melva&quot;      &quot;Mena&quot;      
##  [809] &quot;Mercedes&quot;   &quot;Merle&quot;      &quot;Mima&quot;       &quot;Minda&quot;     
##  [813] &quot;Monica&quot;     &quot;Nealie&quot;     &quot;Netta&quot;      &quot;Nolia&quot;     
##  [817] &quot;Nonie&quot;      &quot;Odelia&quot;     &quot;Ottilie&quot;    &quot;Phyllis&quot;   
##  [821] &quot;Robbie&quot;     &quot;Sabina&quot;     &quot;Sada&quot;       &quot;Sammie&quot;    
##  [825] &quot;Suzanne&quot;    &quot;Sybilla&quot;    &quot;Thea&quot;       &quot;Tressie&quot;   
##  [829] &quot;Vallie&quot;     &quot;Venie&quot;      &quot;Viney&quot;      &quot;Wilhelmine&quot;
##  [833] &quot;Winona&quot;     &quot;Zelda&quot;      &quot;Zilpha&quot;     &quot;Adelle&quot;    
##  [837] &quot;Adina&quot;      &quot;Adrienne&quot;   &quot;Albertine&quot;  &quot;Alys&quot;      
##  [841] &quot;Ana&quot;        &quot;Araminta&quot;   &quot;Arthur&quot;     &quot;Birtha&quot;    
##  [845] &quot;Bulah&quot;      &quot;Caddie&quot;     &quot;Celie&quot;      &quot;Charlotta&quot; 
##  [849] &quot;Clair&quot;      &quot;Concepcion&quot; &quot;Cordella&quot;   &quot;Corrine&quot;   
##  [853] &quot;Delila&quot;     &quot;Delphine&quot;   &quot;Dosha&quot;      &quot;Edgar&quot;     
##  [857] &quot;Elaine&quot;     &quot;Elisa&quot;      &quot;Ellar&quot;      &quot;Elmire&quot;    
##  [861] &quot;Elvina&quot;     &quot;Ena&quot;        &quot;Estie&quot;      &quot;Etter&quot;     
##  [865] &quot;Fronnie&quot;    &quot;Genie&quot;      &quot;Georgina&quot;   &quot;Glenn&quot;     
##  [869] &quot;Gracia&quot;     &quot;Guadalupe&quot;  &quot;Gwendolyn&quot;  &quot;Hassie&quot;    
##  [873] &quot;Honora&quot;     &quot;Icy&quot;        &quot;Isa&quot;        &quot;Isadora&quot;   
##  [877] &quot;Jesse&quot;      &quot;Jewel&quot;      &quot;Joe&quot;        &quot;Johannah&quot;  
##  [881] &quot;Juana&quot;      &quot;Judith&quot;     &quot;Judy&quot;       &quot;Junie&quot;     
##  [885] &quot;Lavonia&quot;    &quot;Lella&quot;      &quot;Lemma&quot;      &quot;Letty&quot;     
##  [889] &quot;Linna&quot;      &quot;Littie&quot;     &quot;Lollie&quot;     &quot;Lorene&quot;    
##  [893] &quot;Louis&quot;      &quot;Love&quot;       &quot;Lovisa&quot;     &quot;Lucina&quot;    
##  [897] &quot;Lynn&quot;       &quot;Madora&quot;     &quot;Mahalia&quot;    &quot;Manervia&quot;  
##  [901] &quot;Manuela&quot;    &quot;Margarett&quot;  &quot;Margaretta&quot; &quot;Margarita&quot; 
##  [905] &quot;Marilla&quot;    &quot;Mignon&quot;     &quot;Mozella&quot;    &quot;Natalie&quot;   
##  [909] &quot;Nelia&quot;      &quot;Nolie&quot;      &quot;Omie&quot;       &quot;Opal&quot;      
##  [913] &quot;Ossie&quot;      &quot;Ottie&quot;      &quot;Ottilia&quot;    &quot;Parthenia&quot; 
##  [917] &quot;Penelope&quot;   &quot;Pinkey&quot;     &quot;Pollie&quot;     &quot;Rennie&quot;    
##  [921] &quot;Reta&quot;       &quot;Roena&quot;      &quot;Rosalee&quot;    &quot;Roseanna&quot;  
##  [925] &quot;Ruthie&quot;     &quot;Sabra&quot;      &quot;Sannie&quot;     &quot;Selena&quot;    
##  [929] &quot;Sibyl&quot;      &quot;Tella&quot;      &quot;Tempie&quot;     &quot;Tennessee&quot; 
##  [933] &quot;Teressa&quot;    &quot;Texas&quot;      &quot;Theda&quot;      &quot;Thelma&quot;    
##  [937] &quot;Thursa&quot;     &quot;Ula&quot;        &quot;Vannie&quot;     &quot;Verona&quot;    
##  [941] &quot;Vertie&quot;     &quot;Wilma&quot;      &quot;John&quot;       &quot;William&quot;   
##  [945] &quot;James&quot;      &quot;Charles&quot;    &quot;George&quot;     &quot;Frank&quot;     
##  [949] &quot;Joseph&quot;     &quot;Thomas&quot;     &quot;Henry&quot;      &quot;Robert&quot;    
##  [953] &quot;Edward&quot;     &quot;Harry&quot;      &quot;Walter&quot;     &quot;Arthur&quot;    
##  [957] &quot;Fred&quot;       &quot;Albert&quot;     &quot;Samuel&quot;     &quot;David&quot;     
##  [961] &quot;Louis&quot;      &quot;Joe&quot;        &quot;Charlie&quot;    &quot;Clarence&quot;  
##  [965] &quot;Richard&quot;    &quot;Andrew&quot;     &quot;Daniel&quot;     &quot;Ernest&quot;    
##  [969] &quot;Will&quot;       &quot;Jesse&quot;      &quot;Oscar&quot;      &quot;Lewis&quot;     
##  [973] &quot;Peter&quot;      &quot;Benjamin&quot;   &quot;Frederick&quot;  &quot;Willie&quot;    
##  [977] &quot;Alfred&quot;     &quot;Sam&quot;        &quot;Roy&quot;        &quot;Herbert&quot;   
##  [981] &quot;Jacob&quot;      &quot;Tom&quot;        &quot;Elmer&quot;      &quot;Carl&quot;      
##  [985] &quot;Lee&quot;        &quot;Howard&quot;     &quot;Martin&quot;     &quot;Michael&quot;   
##  [989] &quot;Bert&quot;       &quot;Herman&quot;     &quot;Jim&quot;        &quot;Francis&quot;   
##  [993] &quot;Harvey&quot;     &quot;Earl&quot;       &quot;Eugene&quot;     &quot;Ralph&quot;     
##  [997] &quot;Ed&quot;         &quot;Claude&quot;     &quot;Edwin&quot;      &quot;Ben&quot;       
##  [ reached getOption(&quot;max.print&quot;) -- omitted 1923665 entries ]</code></pre>
<p>Let’s use str_detect() to find all of the names that include a ‘sh’ sound:</p>
<p>As you see, str_detect() runs as a <em>boolean operator</em>, in that it ascribes a <em>TRUE</em> or <em>FALSE</em> value for each entry in the column, based on our conditional statement: is there a ‘sh’ in the character string?</p>
<p>Let’s combine our previous experience with ggplot to write a long, complicated set of code that will visualize the <em>most popular names starting in ‘Sh’ for women born in 1938:</em></p>
<div class="sourceCode" id="cb88"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb88-1"><a href="manipulating-data.html#cb88-1" aria-hidden="true" tabindex="-1"></a>babynames <span class="sc">%&gt;%</span> </span>
<span id="cb88-2"><a href="manipulating-data.html#cb88-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">str_detect</span>(name, <span class="st">&quot;Sh&quot;</span>) <span class="sc">&amp;</span> sex<span class="sc">==</span><span class="st">&quot;F&quot;</span> <span class="sc">&amp;</span> year <span class="sc">==</span> <span class="dv">1938</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb88-3"><a href="manipulating-data.html#cb88-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(prop)) <span class="sc">%&gt;%</span> </span>
<span id="cb88-4"><a href="manipulating-data.html#cb88-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>(<span class="dv">20</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb88-5"><a href="manipulating-data.html#cb88-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="fu">reorder</span>(name,prop),prop,  <span class="at">fill =</span> name)) <span class="sc">+</span> </span>
<span id="cb88-6"><a href="manipulating-data.html#cb88-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>() <span class="sc">+</span></span>
<span id="cb88-7"><a href="manipulating-data.html#cb88-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_flip</span>()</span></code></pre></div>
<p><img src="bookdownproj_files/figure-html/unnamed-chunk-37-1.png" width="672" /></p>
<p>Let’s fancy that up a bit, by calculating a ‘percentage’ of use of that name per year / per gender:</p>
<div class="sourceCode" id="cb89"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb89-1"><a href="manipulating-data.html#cb89-1" aria-hidden="true" tabindex="-1"></a>babynames <span class="sc">%&gt;%</span> </span>
<span id="cb89-2"><a href="manipulating-data.html#cb89-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">str_detect</span>(name, <span class="st">&quot;Sh&quot;</span>) <span class="sc">&amp;</span> sex<span class="sc">==</span><span class="st">&quot;F&quot;</span> <span class="sc">&amp;</span> year <span class="sc">==</span> <span class="dv">1938</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb89-3"><a href="manipulating-data.html#cb89-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(prop)) <span class="sc">%&gt;%</span> </span>
<span id="cb89-4"><a href="manipulating-data.html#cb89-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>(<span class="dv">20</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb89-5"><a href="manipulating-data.html#cb89-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">percent =</span> (prop <span class="sc">*</span> <span class="dv">100</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb89-6"><a href="manipulating-data.html#cb89-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="fu">reorder</span>(name,percent),percent,  <span class="at">fill =</span> name)) <span class="sc">+</span> </span>
<span id="cb89-7"><a href="manipulating-data.html#cb89-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>() <span class="sc">+</span></span>
<span id="cb89-8"><a href="manipulating-data.html#cb89-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_flip</span>()</span></code></pre></div>
<p><img src="bookdownproj_files/figure-html/unnamed-chunk-38-1.png" width="672" /></p>
<p>how many ‘z’ names since 2000?</p>
<div class="sourceCode" id="cb90"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb90-1"><a href="manipulating-data.html#cb90-1" aria-hidden="true" tabindex="-1"></a>babynames <span class="sc">%&gt;%</span> </span>
<span id="cb90-2"><a href="manipulating-data.html#cb90-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(year <span class="sc">&gt;</span> <span class="dv">2000</span> <span class="sc">&amp;</span> <span class="fu">str_detect</span>(name, <span class="st">&quot;Z&quot;</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb90-3"><a href="manipulating-data.html#cb90-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(prop))</span></code></pre></div>
<pre><code>## # A tibble: 13,018 × 5
##     year sex   name        n    prop
##    &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt;   &lt;int&gt;   &lt;dbl&gt;
##  1  2001 M     Zachary 18186 0.00880
##  2  2002 M     Zachary 16622 0.00805
##  3  2003 M     Zachary 15539 0.00740
##  4  2004 M     Zachary 13711 0.00649
##  5  2005 M     Zachary 12283 0.00578
##  6  2006 M     Zachary 11005 0.00502
##  7  2007 M     Zachary 10212 0.00461
##  8  2008 M     Zachary  9226 0.00424
##  9  2012 F     Zoey     7466 0.00386
## 10  2009 M     Zachary  8078 0.00381
## # … with 13,008 more rows</code></pre>
<p>Why did R only pull out the names starting with Z? Because we capitalized it. How do we get both?</p>
<div class="sourceCode" id="cb92"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb92-1"><a href="manipulating-data.html#cb92-1" aria-hidden="true" tabindex="-1"></a>    babynames <span class="sc">%&gt;%</span> </span>
<span id="cb92-2"><a href="manipulating-data.html#cb92-2" aria-hidden="true" tabindex="-1"></a>      <span class="fu">mutate</span>(<span class="at">Z =</span> <span class="fu">str_count</span>(babynames<span class="sc">$</span>name, <span class="st">&quot;[zZ]&quot;</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb92-3"><a href="manipulating-data.html#cb92-3" aria-hidden="true" tabindex="-1"></a>      <span class="fu">arrange</span>(<span class="fu">desc</span>(prop))</span></code></pre></div>
<pre><code>## # A tibble: 1,924,665 × 6
##     year sex   name        n   prop     Z
##    &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt;   &lt;int&gt;  &lt;dbl&gt; &lt;int&gt;
##  1  1880 M     John     9655 0.0815     0
##  2  1881 M     John     8769 0.0810     0
##  3  1880 M     William  9532 0.0805     0
##  4  1883 M     John     8894 0.0791     0
##  5  1881 M     William  8524 0.0787     0
##  6  1882 M     John     9557 0.0783     0
##  7  1884 M     John     9388 0.0765     0
##  8  1882 M     William  9298 0.0762     0
##  9  1886 M     John     9026 0.0758     0
## 10  1885 M     John     8756 0.0755     0
## # … with 1,924,655 more rows</code></pre>
<p>Instead of arranging our data by name popularity, let’s look at the names with the <em>most</em> z’s in them:</p>
<div class="sourceCode" id="cb94"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb94-1"><a href="manipulating-data.html#cb94-1" aria-hidden="true" tabindex="-1"></a>    babynames <span class="sc">%&gt;%</span> </span>
<span id="cb94-2"><a href="manipulating-data.html#cb94-2" aria-hidden="true" tabindex="-1"></a>      <span class="fu">mutate</span>(<span class="at">Z =</span> <span class="fu">str_count</span>(babynames<span class="sc">$</span>name, <span class="st">&quot;[zZ]&quot;</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb94-3"><a href="manipulating-data.html#cb94-3" aria-hidden="true" tabindex="-1"></a>      <span class="fu">arrange</span>(<span class="fu">desc</span>(Z))</span></code></pre></div>
<pre><code>## # A tibble: 1,924,665 × 6
##     year sex   name       n       prop     Z
##    &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt;  &lt;int&gt;      &lt;dbl&gt; &lt;int&gt;
##  1  2010 M     Zzyzx      5 0.00000244     3
##  2  1880 F     Lizzie   388 0.00398        2
##  3  1880 F     Kizzie    13 0.000133       2
##  4  1881 F     Lizzie   396 0.00401        2
##  5  1881 F     Kizzie     9 0.0000910      2
##  6  1882 F     Lizzie   495 0.00428        2
##  7  1882 F     Kizzie     9 0.0000778      2
##  8  1882 F     Dezzie     5 0.0000432      2
##  9  1883 F     Lizzie   496 0.00413        2
## 10  1883 F     Kizzie    14 0.000117       2
## # … with 1,924,655 more rows</code></pre>
<p>What if, instead of specifying a particular letter, we just wanted to count the most frequent first letters in names?</p>
<div class="sourceCode" id="cb96"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb96-1"><a href="manipulating-data.html#cb96-1" aria-hidden="true" tabindex="-1"></a>    babynames <span class="sc">%&gt;%</span> </span>
<span id="cb96-2"><a href="manipulating-data.html#cb96-2" aria-hidden="true" tabindex="-1"></a>      <span class="fu">mutate</span>(<span class="at">first_letter =</span> <span class="fu">substr</span>(name, <span class="dv">1</span>,<span class="dv">1</span>)) <span class="ot">-&gt;</span> baby_letters</span></code></pre></div>
<p>Let’s plot that:</p>
<div class="sourceCode" id="cb97"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb97-1"><a href="manipulating-data.html#cb97-1" aria-hidden="true" tabindex="-1"></a>    baby_letters <span class="sc">%&gt;%</span> </span>
<span id="cb97-2"><a href="manipulating-data.html#cb97-2" aria-hidden="true" tabindex="-1"></a>      <span class="fu">count</span>(first_letter, <span class="at">sort =</span> <span class="cn">TRUE</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb97-3"><a href="manipulating-data.html#cb97-3" aria-hidden="true" tabindex="-1"></a>      <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="fu">reorder</span>(first_letter, n),n)) <span class="sc">+</span> </span>
<span id="cb97-4"><a href="manipulating-data.html#cb97-4" aria-hidden="true" tabindex="-1"></a>      <span class="fu">geom_col</span>() <span class="sc">+</span></span>
<span id="cb97-5"><a href="manipulating-data.html#cb97-5" aria-hidden="true" tabindex="-1"></a>      <span class="fu">coord_flip</span>()</span></code></pre></div>
<p><img src="bookdownproj_files/figure-html/unnamed-chunk-43-1.png" width="672" /></p>
<p>We can also use stringr to calculate the length of all of our strings. What is the frequency of the shortest and longest names?</p>
<div class="sourceCode" id="cb98"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb98-1"><a href="manipulating-data.html#cb98-1" aria-hidden="true" tabindex="-1"></a>    babynames <span class="sc">%&gt;%</span> </span>
<span id="cb98-2"><a href="manipulating-data.html#cb98-2" aria-hidden="true" tabindex="-1"></a>      <span class="fu">mutate</span>(<span class="at">length =</span> <span class="fu">str_length</span>(name)) <span class="ot">-&gt;</span> babynames_length</span></code></pre></div>
</div>
</div>
<div id="average-name-length-over-time" class="section level2 hasAnchor" number="2.4">
<h2><span class="header-section-number">2.4</span> Average name length over time<a href="manipulating-data.html#average-name-length-over-time" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Now, if we want to see the average length of a names over time, the code gets a little mroe advanced - note the <em>mean</em> function we haven’t used like this before:</p>
<div class="sourceCode" id="cb99"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb99-1"><a href="manipulating-data.html#cb99-1" aria-hidden="true" tabindex="-1"></a>    babynames_length <span class="sc">%&gt;%</span> </span>
<span id="cb99-2"><a href="manipulating-data.html#cb99-2" aria-hidden="true" tabindex="-1"></a>      <span class="fu">group_by</span>(year) <span class="sc">%&gt;%</span> </span>
<span id="cb99-3"><a href="manipulating-data.html#cb99-3" aria-hidden="true" tabindex="-1"></a>      <span class="fu">summarise_at</span>(<span class="fu">vars</span>(length), <span class="fu">funs</span>(<span class="fu">mean</span>(.))) <span class="sc">%&gt;%</span> </span>
<span id="cb99-4"><a href="manipulating-data.html#cb99-4" aria-hidden="true" tabindex="-1"></a>      <span class="fu">ggplot</span>(<span class="fu">aes</span>(year, length)) <span class="sc">+</span> <span class="fu">geom_line</span>()</span></code></pre></div>
<p><img src="bookdownproj_files/figure-html/unnamed-chunk-45-1.png" width="672" /></p>
<p>The results are impressive. Let’s split them up by Sex:</p>
<div class="sourceCode" id="cb100"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb100-1"><a href="manipulating-data.html#cb100-1" aria-hidden="true" tabindex="-1"></a>    babynames_length <span class="sc">%&gt;%</span> </span>
<span id="cb100-2"><a href="manipulating-data.html#cb100-2" aria-hidden="true" tabindex="-1"></a>      <span class="fu">group_by</span>(year, sex) <span class="sc">%&gt;%</span> </span>
<span id="cb100-3"><a href="manipulating-data.html#cb100-3" aria-hidden="true" tabindex="-1"></a>      <span class="fu">summarise_at</span>(<span class="fu">vars</span>(length), <span class="fu">funs</span>(<span class="fu">mean</span>(.))) <span class="sc">%&gt;%</span> </span>
<span id="cb100-4"><a href="manipulating-data.html#cb100-4" aria-hidden="true" tabindex="-1"></a>      <span class="fu">ggplot</span>(<span class="fu">aes</span>(year, length, <span class="at">color =</span> sex)) <span class="sc">+</span> <span class="fu">geom_line</span>()</span></code></pre></div>
<p><img src="bookdownproj_files/figure-html/unnamed-chunk-46-1.png" width="672" /></p>
</div>
<div id="revisiting-summarize" class="section level2 hasAnchor" number="2.5">
<h2><span class="header-section-number">2.5</span> Revisiting summarize()<a href="manipulating-data.html#revisiting-summarize" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>As mentioned in the last Chapter, summarize() is confusing. In the case of babynames, you’ll know to use it when you keep getting the same results over and over, and you want to group those names together. Let’s take a look at this issue by calculating the most common 3-letter names:</p>
<div class="sourceCode" id="cb101"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb101-1"><a href="manipulating-data.html#cb101-1" aria-hidden="true" tabindex="-1"></a>    babynames_length <span class="sc">%&gt;%</span> </span>
<span id="cb101-2"><a href="manipulating-data.html#cb101-2" aria-hidden="true" tabindex="-1"></a>      <span class="fu">filter</span>(length <span class="sc">==</span> <span class="dv">3</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb101-3"><a href="manipulating-data.html#cb101-3" aria-hidden="true" tabindex="-1"></a>      <span class="fu">arrange</span>(<span class="fu">desc</span>(prop))</span></code></pre></div>
<pre><code>## # A tibble: 41,274 × 6
##     year sex   name      n   prop length
##    &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt; &lt;int&gt;  &lt;dbl&gt;  &lt;int&gt;
##  1  1975 F     Amy   32252 0.0207      3
##  2  1976 F     Amy   31341 0.0199      3
##  3  1974 F     Amy   29564 0.0189      3
##  4  1973 F     Amy   26964 0.0174      3
##  5  1977 F     Amy   26731 0.0163      3
##  6  1972 F     Amy   25873 0.0160      3
##  7  1880 F     Ida    1472 0.0151      3
##  8  1971 F     Amy   26238 0.0150      3
##  9  1881 F     Ida    1439 0.0146      3
## 10  1882 F     Ida    1673 0.0145      3
## # … with 41,264 more rows</code></pre>
<p>We get a lot of repeated names. Time to summarize!</p>
<div class="sourceCode" id="cb103"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb103-1"><a href="manipulating-data.html#cb103-1" aria-hidden="true" tabindex="-1"></a>    babynames_length <span class="sc">%&gt;%</span> </span>
<span id="cb103-2"><a href="manipulating-data.html#cb103-2" aria-hidden="true" tabindex="-1"></a>      <span class="fu">filter</span>(length <span class="sc">==</span> <span class="dv">3</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb103-3"><a href="manipulating-data.html#cb103-3" aria-hidden="true" tabindex="-1"></a>      <span class="fu">group_by</span>(name) <span class="sc">%&gt;%</span> </span>
<span id="cb103-4"><a href="manipulating-data.html#cb103-4" aria-hidden="true" tabindex="-1"></a>      <span class="fu">summarise</span>(<span class="at">total =</span> <span class="fu">sum</span>(n) ) <span class="sc">%&gt;%</span> </span>
<span id="cb103-5"><a href="manipulating-data.html#cb103-5" aria-hidden="true" tabindex="-1"></a>      <span class="fu">arrange</span>(<span class="fu">desc</span>(total))</span></code></pre></div>
<pre><code>## # A tibble: 970 × 2
##    name   total
##    &lt;chr&gt;  &lt;int&gt;
##  1 Amy   692096
##  2 Ann   469710
##  3 Joe   462099
##  4 Roy   407020
##  5 Lee   292891
##  6 Eva   263741
##  7 Ava   251052
##  8 Ian   222950
##  9 Mia   216774
## 10 Kim   214365
## # … with 960 more rows</code></pre>
<p>Let’s try that again, with 2-letter names:</p>
<div class="sourceCode" id="cb105"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb105-1"><a href="manipulating-data.html#cb105-1" aria-hidden="true" tabindex="-1"></a>    babynames_length <span class="sc">%&gt;%</span> </span>
<span id="cb105-2"><a href="manipulating-data.html#cb105-2" aria-hidden="true" tabindex="-1"></a>      <span class="fu">filter</span>(length <span class="sc">==</span> <span class="dv">2</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb105-3"><a href="manipulating-data.html#cb105-3" aria-hidden="true" tabindex="-1"></a>      <span class="fu">group_by</span>(name) <span class="sc">%&gt;%</span> </span>
<span id="cb105-4"><a href="manipulating-data.html#cb105-4" aria-hidden="true" tabindex="-1"></a>      <span class="fu">summarize</span>(<span class="at">total =</span> <span class="fu">sum</span>(n)) <span class="sc">%&gt;%</span> </span>
<span id="cb105-5"><a href="manipulating-data.html#cb105-5" aria-hidden="true" tabindex="-1"></a>      <span class="fu">arrange</span>(<span class="fu">desc</span>(total)) </span></code></pre></div>
<pre><code>## # A tibble: 149 × 2
##    name   total
##    &lt;chr&gt;  &lt;int&gt;
##  1 Jo    180579
##  2 Ty     45278
##  3 Ed     26330
##  4 Al     17221
##  5 Bo     10856
##  6 Lu      4013
##  7 Cy      3418
##  8 Wm      2737
##  9 Kc      2585
## 10 An      2048
## # … with 139 more rows</code></pre>
<p>What is the longest name?</p>
<div class="sourceCode" id="cb107"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb107-1"><a href="manipulating-data.html#cb107-1" aria-hidden="true" tabindex="-1"></a>    babynames_length <span class="sc">%&gt;%</span> </span>
<span id="cb107-2"><a href="manipulating-data.html#cb107-2" aria-hidden="true" tabindex="-1"></a>      <span class="fu">arrange</span>(<span class="fu">desc</span>(length))</span></code></pre></div>
<pre><code>## # A tibble: 1,924,665 × 6
##     year sex   name                n       prop length
##    &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt;           &lt;int&gt;      &lt;dbl&gt;  &lt;int&gt;
##  1  1978 M     Christophermich     5 0.00000293     15
##  2  1979 M     Johnchristopher     5 0.00000279     15
##  3  1980 M     Christophermich     7 0.00000377     15
##  4  1980 M     Christopherjohn     5 0.0000027      15
##  5  1981 F     Mariadelrosario     5 0.0000028      15
##  6  1981 M     Christopherjohn     5 0.00000268     15
##  7  1982 F     Mariadelosangel     6 0.00000331     15
##  8  1982 M     Christopherjohn     6 0.00000318     15
##  9  1982 M     Christophermich     5 0.00000265     15
## 10  1983 M     Christopherjohn     8 0.00000429     15
## # … with 1,924,655 more rows</code></pre>
<p>How many 15 letter names are there?</p>
<div class="sourceCode" id="cb109"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb109-1"><a href="manipulating-data.html#cb109-1" aria-hidden="true" tabindex="-1"></a>babynames_length <span class="sc">%&gt;%</span> </span>
<span id="cb109-2"><a href="manipulating-data.html#cb109-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(length <span class="sc">==</span> <span class="dv">15</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb109-3"><a href="manipulating-data.html#cb109-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(name) <span class="sc">%&gt;%</span> </span>
<span id="cb109-4"><a href="manipulating-data.html#cb109-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">total =</span> <span class="fu">sum</span>(n)) <span class="sc">%&gt;%</span> </span>
<span id="cb109-5"><a href="manipulating-data.html#cb109-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(total)) <span class="sc">%&gt;%</span> </span>
<span id="cb109-6"><a href="manipulating-data.html#cb109-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>(<span class="dv">10</span>) <span class="ot">-&gt;</span> length_15</span></code></pre></div>
<p>Let’s plot those names:</p>
<div class="sourceCode" id="cb110"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb110-1"><a href="manipulating-data.html#cb110-1" aria-hidden="true" tabindex="-1"></a>babynames <span class="sc">%&gt;%</span> </span>
<span id="cb110-2"><a href="manipulating-data.html#cb110-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(name <span class="sc">%in%</span> <span class="fu">c</span>(length_15<span class="sc">$</span>name)) <span class="sc">%&gt;%</span> </span>
<span id="cb110-3"><a href="manipulating-data.html#cb110-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(year, prop, <span class="at">color =</span> name)) <span class="sc">+</span> <span class="fu">geom_line</span>() </span></code></pre></div>
<p><img src="bookdownproj_files/figure-html/unnamed-chunk-52-1.png" width="672" /></p>
<p>By the look of these names, it’s clear that most of them are actually <em>longer</em> than 15 characters - but 15 characters is the cut-off point for the column. Thus, we cannot accurately estimate the most common 15-letter names.</p>
<p>Along similar lines, an analysis of the methodology behind <em>babynames</em> shows that only names that have <em>at least 5 instances in a given year</em> are recorded. So it’d be similarly futile for us to attempt to measure the <em>rarest</em> names, as they are excluded in the database. (It also helps clarify why some rarer names seem to ‘disappear’ in certain years.)</p>
</div>
<div id="additional-functions" class="section level2 hasAnchor" number="2.6">
<h2><span class="header-section-number">2.6</span> Additional Functions<a href="manipulating-data.html#additional-functions" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>OK, what else can stringr do?</p>
<p>How about the average number of vowels per name?</p>
<div class="sourceCode" id="cb111"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb111-1"><a href="manipulating-data.html#cb111-1" aria-hidden="true" tabindex="-1"></a> <span class="fu">str_count</span>(babynames<span class="sc">$</span>name, <span class="st">&quot;[aeiou]&quot;</span>)</span></code></pre></div>
<pre><code>##    [1] 1 1 1 3 3 3 1 2 2 2 2 2 1 3 2 2 3 3 2 3 3 2 3 3 3 3 3 1
##   [29] 3 2 4 3 1 3 2 3 4 1 2 1 1 2 2 1 1 3 2 2 3 4 2 2 4 1 3 2
##   [57] 1 3 2 2 1 1 2 3 3 2 3 2 3 2 2 1 3 3 4 3 2 2 2 2 3 1 2 4
##   [85] 2 2 3 3 2 2 3 3 1 3 2 3 2 2 4 1 3 2 1 1 3 4 2 0 2 2 2 3
##  [113] 3 1 4 3 2 3 3 1 2 0 3 3 2 3 3 3 1 4 3 2 1 2 2 1 3 3 2 3
##  [141] 1 2 3 2 3 3 4 4 1 3 1 3 3 4 3 3 2 1 3 3 2 2 2 3 3 1 1 2
##  [169] 3 1 2 4 2 2 2 2 3 2 2 3 3 3 1 1 3 4 3 3 2 2 3 1 3 3 3 3
##  [197] 2 3 2 2 3 5 2 4 3 2 4 3 3 2 2 2 3 3 3 1 3 3 2 2 2 3 4 5
##  [225] 2 4 1 3 1 3 2 2 4 1 3 3 4 2 3 2 1 3 3 2 1 3 4 3 3 3 4 3
##  [253] 2 2 3 5 2 3 2 4 2 2 3 2 2 3 4 4 1 3 3 3 0 3 1 3 2 1 3 2
##  [281] 2 3 2 1 1 3 3 2 1 2 3 4 1 2 2 4 1 3 2 2 3 2 3 2 2 3 3 2
##  [309] 2 1 3 3 3 4 3 3 3 3 2 3 2 2 2 2 3 1 2 3 2 3 3 2 3 1 2 4
##  [337] 2 3 4 2 2 1 2 2 3 4 4 3 3 3 3 2 4 3 1 2 3 3 3 4 4 3 1 3
##  [365] 3 3 2 3 1 1 3 3 2 3 4 4 1 4 3 3 2 3 4 2 2 2 2 3 2 3 2 3
##  [393] 5 3 2 3 2 2 3 1 2 1 2 1 3 2 2 2 3 2 3 3 2 1 3 3 2 3 3 2
##  [421] 2 3 2 2 4 1 4 4 3 3 1 4 2 2 2 3 3 1 2 3 5 3 3 2 2 1 2 4
##  [449] 1 1 1 3 2 3 3 1 3 2 4 3 3 3 2 2 4 3 2 1 2 4 3 3 1 2 3 4
##  [477] 2 1 1 1 3 3 3 4 3 3 1 2 3 2 2 3 4 3 4 3 3 4 3 2 2 2 3 2
##  [505] 3 2 3 2 3 3 2 2 3 3 2 2 2 2 1 2 3 2 3 1 2 3 1 1 2 1 1 2
##  [533] 3 3 3 3 3 3 5 3 3 4 3 2 2 2 1 4 2 1 3 3 3 3 3 3 1 1 3 2
##  [561] 2 2 3 4 4 3 2 3 3 2 4 4 2 3 2 5 3 1 3 2 2 3 1 3 3 1 2 3
##  [589] 2 3 1 2 3 2 1 2 3 3 1 1 1 1 2 3 2 3 3 5 1 3 2 2 3 3 4 4
##  [617] 2 2 1 1 3 4 4 3 2 2 3 2 2 2 3 1 3 4 3 3 3 3 2 3 2 3 2 0
##  [645] 1 3 2 2 1 1 2 2 3 4 3 3 3 4 3 2 3 3 2 2 2 2 1 1 3 3 2 3
##  [673] 2 3 2 2 2 2 3 2 1 2 2 1 2 2 3 3 3 3 3 3 1 4 4 1 4 3 3 4
##  [701] 2 2 2 2 3 3 2 1 2 3 3 3 3 2 2 3 3 4 3 3 2 2 1 3 4 4 2 3
##  [729] 3 2 2 3 2 2 2 2 2 0 3 1 1 1 2 1 3 2 2 2 4 3 2 2 0 2 3 2
##  [757] 3 4 1 2 3 4 3 2 1 3 3 2 2 3 1 0 4 2 2 2 3 4 3 3 2 4 3 2
##  [785] 1 2 3 3 1 3 3 3 2 1 3 4 3 3 2 2 2 4 3 2 3 2 2 2 3 2 2 2
##  [813] 3 4 2 3 3 3 3 1 3 3 2 3 3 2 2 3 3 3 2 4 3 2 2 2 2 3 3 0
##  [841] 1 3 1 2 2 3 3 3 2 4 3 3 3 3 2 1 3 2 1 2 2 1 2 1 3 3 4 1
##  [869] 3 5 2 3 3 0 1 3 2 2 2 3 3 2 1 3 4 2 2 1 2 3 3 3 3 2 3 3
##  [897] 0 3 4 4 4 3 4 4 3 2 3 4 3 3 2 1 2 2 3 4 4 2 3 3 2 3 4 4
##  [925] 3 2 3 3 1 2 3 4 3 2 2 2 2 1 3 3 3 2 1 3 2 2 3 1 2 2 1 2
##  [953] 1 1 2 1 1 1 3 2 3 2 3 3 2 1 3 1 1 2 1 2 2 3 3 3 1 1 1 2
##  [981] 2 1 1 1 2 2 2 3 1 2 1 2 2 1 3 1 0 3 1 1
##  [ reached getOption(&quot;max.print&quot;) -- omitted 1923665 entries ]</code></pre>
<p>That’s a lot of numbers. Let’s calculate a mean value instead:</p>
<div class="sourceCode" id="cb113"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb113-1"><a href="manipulating-data.html#cb113-1" aria-hidden="true" tabindex="-1"></a> <span class="fu">mean</span>(<span class="fu">str_count</span>(babynames<span class="sc">$</span>name, <span class="st">&quot;[aeiou]&quot;</span>))</span></code></pre></div>
<pre><code>## [1] 2.421</code></pre>
<p>How about consonants?</p>
<div class="sourceCode" id="cb115"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb115-1"><a href="manipulating-data.html#cb115-1" aria-hidden="true" tabindex="-1"></a>     <span class="fu">mean</span>(<span class="fu">str_count</span>(babynames<span class="sc">$</span>name, <span class="st">&quot;[bcdfghjklmnpqrstvwxyz]&quot;</span>))</span></code></pre></div>
<pre><code>## [1] 2.752</code></pre>
<p>Example ideas for further exploration:</p>
<p>How many names contain ‘liz’ in them?</p>
<div class="sourceCode" id="cb117"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb117-1"><a href="manipulating-data.html#cb117-1" aria-hidden="true" tabindex="-1"></a>    babynames <span class="sc">%&gt;%</span> </span>
<span id="cb117-2"><a href="manipulating-data.html#cb117-2" aria-hidden="true" tabindex="-1"></a>      <span class="fu">filter</span>(<span class="fu">str_detect</span>(babynames<span class="sc">$</span>name, <span class="st">&quot;liz&quot;</span>) )  <span class="sc">%&gt;%</span> </span>
<span id="cb117-3"><a href="manipulating-data.html#cb117-3" aria-hidden="true" tabindex="-1"></a>      <span class="fu">count</span>(name, <span class="at">sort =</span> <span class="cn">TRUE</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb117-4"><a href="manipulating-data.html#cb117-4" aria-hidden="true" tabindex="-1"></a>      <span class="fu">head</span>(<span class="dv">20</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb117-5"><a href="manipulating-data.html#cb117-5" aria-hidden="true" tabindex="-1"></a>      <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="fu">reorder</span>(name, n),n)) <span class="sc">+</span> <span class="fu">geom_col</span>() <span class="sc">+</span> </span>
<span id="cb117-6"><a href="manipulating-data.html#cb117-6" aria-hidden="true" tabindex="-1"></a>      <span class="fu">coord_flip</span>()</span></code></pre></div>
<p><img src="bookdownproj_files/figure-html/unnamed-chunk-56-1.png" width="672" /></p>
</div>
<div id="case-study-born-without-a-proper-name" class="section level2 hasAnchor" number="2.7">
<h2><span class="header-section-number">2.7</span> Case Study: Born Without A (Proper) Name<a href="manipulating-data.html#case-study-born-without-a-proper-name" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>There are a number of names in the database that are totally anonymous. When, and why?</p>
<div class="sourceCode" id="cb118"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb118-1"><a href="manipulating-data.html#cb118-1" aria-hidden="true" tabindex="-1"></a>babynames <span class="sc">%&gt;%</span> </span>
<span id="cb118-2"><a href="manipulating-data.html#cb118-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(name <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;Unknown&quot;</span>, <span class="st">&quot;Unnamed&quot;</span>, <span class="st">&quot;Infant&quot;</span>, <span class="st">&quot;Infantof&quot;</span>, <span class="st">&quot;Notnamed&quot;</span>, <span class="st">&quot;Baby&quot;</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb118-3"><a href="manipulating-data.html#cb118-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(year, prop, <span class="at">color =</span> name)) <span class="sc">+</span> <span class="fu">geom_line</span>() <span class="sc">+</span> <span class="fu">facet_wrap</span>(<span class="sc">~</span>sex)</span></code></pre></div>
<p><img src="bookdownproj_files/figure-html/unnamed-chunk-57-1.png" width="672" /></p>
<p>Let’s compare this to the number of unique names per year:</p>
<div class="sourceCode" id="cb119"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb119-1"><a href="manipulating-data.html#cb119-1" aria-hidden="true" tabindex="-1"></a>babynames <span class="sc">%&gt;%</span> </span>
<span id="cb119-2"><a href="manipulating-data.html#cb119-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(year) <span class="sc">%&gt;%</span> </span>
<span id="cb119-3"><a href="manipulating-data.html#cb119-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">annual =</span> <span class="fu">n_distinct</span>(name)) <span class="sc">%&gt;%</span> </span>
<span id="cb119-4"><a href="manipulating-data.html#cb119-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(year, annual )) <span class="sc">+</span> <span class="fu">geom_line</span>()</span></code></pre></div>
<p><img src="bookdownproj_files/figure-html/unnamed-chunk-58-1.png" width="672" /></p>
<p><em>Babynames</em> also includes a data set called births, that simply lists out the total number of births per year:</p>
<div class="sourceCode" id="cb120"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb120-1"><a href="manipulating-data.html#cb120-1" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(births)</span>
<span id="cb120-2"><a href="manipulating-data.html#cb120-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(births, <span class="fu">aes</span>(year, births)) <span class="sc">+</span> <span class="fu">geom_line</span>()</span></code></pre></div>
<p><img src="bookdownproj_files/figure-html/unnamed-chunk-59-1.png" width="672" /></p>
<p>Why are these last two graphs different? Because the first is counting names, the second is counting births. And most babies have names that are shared with other babies, especially in the same year.</p>
</div>
<div id="assignment" class="section level2 hasAnchor" number="2.8">
<h2><span class="header-section-number">2.8</span> Assignment<a href="manipulating-data.html#assignment" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Create a report using the Hadley Wickham packaged dataset ‘babynames.’</p>
<p><strong>Requirements</strong>:</p>
<p><strong>The report should include at least four observations, with visualizations. At least two of them should be unique, i.e., not something we already did in class. </strong></p>
<p>For example, if you did the ‘Beatles’ example I mentioned in class, you can plot those names over time. But what else? What about the period that the Beatles became popular? Could you annotate your visualizations to show that period? What about names like ‘John’ over time – can you really make an argument that one man had an outsized influence on this already popular name? Did other bands have a similar influence, or just the Beatles? Did the popularity of the Beatles names sustain itself, or die out over time? Perhaps a better, more quantitative approach is to avoid celebrity, and focus only on the dataset. What are the most common first or last letters in names over time? What about name length? Etc.</p>
<p><strong>Your report must propose a hypothesis, or introduce a topic for exploration, explain your process (code) and results (visualizations), and then have a conclusion that argues that your hypothesis was either proven or disproven, and why you think that is.</strong> Even if your topic is silly, your report should adhere to this presentation method, and your tone should be more academic than friendly. Text content can be written as comments, with the ‘#’ in the front of the line. Code can be left just as code; feel free to use comments to clarify what you’re doing.</p>
<p><strong>Your report can be evaluated based on the following items:</strong></p>
<ol style="list-style-type: decimal">
<li><p>Focus on your methodology: are your results reproducible? Did you filter or limit the data in a logical, non-arbitrary way?</p></li>
<li><p>Choose a hypothesis that has nothing to do with <em>you</em>. Our aim is to generate reproducible results; no one will want to replicate the results of your name. Your hypothesis should be something that makes sense to anyone: names starting with vowels are increasing in proportion, biblical names are on the decline, ‘Game of Thrones’ is causing Americans to give their children unfathomably terrible first names.</p></li>
<li><p>For each visualization, consider including a paragraph describing your findings, and another paragraph describing your process.</p></li>
<li><p>If you use an external source, be sure to include the URL in a comment.</p></li>
</ol>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="intro-to-programming-in-r.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="statistical-analyses-of-a-single-variable.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/jennyjiangke/book/edit/master/02-Manipulating_Data.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": "https://github.com/jennyjiangke/book/blob/master/02-Manipulating_Data.Rmd",
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
